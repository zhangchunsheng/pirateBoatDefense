this.GL=this.GL||{};(function(){var a=function(){throw"UID cannot be instantiated";};a._nextID=0;a.get=function(){return a._nextID++};GL.UID=a})();this.GL=this.GL||{};(function(){var a=function(){throw"Ticker cannot be instantiated.";};a.useRAF=null;a._listeners=null;a._pauseable=null;a._paused=false;a._inited=false;a._startTime=0;a._pausedTime=0;a._ticks=0;a._pausedTicks=0;a._interval=50;a._lastTime=0;a._times=null;a._tickTimes=null;a._rafActive=false;a._timeoutID=null;a.addListener=function(b,c){b!=null&&(a._inited||a.init(),a.removeListener(b),a._pauseable[a._listeners.length]=c==null?true:c,a._listeners.push(b))};a.init=function(){a._inited=true;a._times=[];a._tickTimes=[];a._pauseable=[];a._listeners=[];a._times.push(a._lastTime=a._startTime=a._getTime());a.setInterval(a._interval)};a.removeListener=function(b){var c=a._listeners;c&&(b=c.indexOf(b),b!=-1&&(c.splice(b,1),a._pauseable.splice(b,1)))};a.removeAllListeners=function(){a._listeners=[];a._pauseable=[]};a.setInterval=function(b){a._interval=b;a._inited&&a._setupTick()};a.getInterval=function(){return a._interval};a.setFPS=function(b){a.setInterval(1e3/b)};a.getFPS=function(){return 1e3/a._interval};a.getMeasuredFPS=function(b){if(a._times.length<2)return-1;b==null&&(b=a.getFPS()|0);b=Math.min(a._times.length-1,b);return 1e3/((a._times[0]-a._times[b])/b)};a.setPaused=function(b){a._paused=b};a.getPaused=function(){return a._paused};a.getTime=function(b){return a._getTime()-a._startTime-(b?a._pausedTime:0)};a.getTicks=function(b){return a._ticks-(b?a._pausedTicks:0)};a._handleAF=function(){a._rafActive=false;a._setupTick();a._getTime()-a._lastTime>=(a._interval-1)*.97&&a._tick()};a._handleTimeout=function(){a.timeoutID=null;a._setupTick();a._tick()};a._setupTick=function(){if(!(a._rafActive||a.timeoutID!=null)){if(a.useRAF){var b=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(b){b(a._handleAF);a._rafActive=true;return}}a.timeoutID=setTimeout(a._handleTimeout,a._interval)}};a._tick=function(){var c=a._getTime();a._ticks++;var g=c-a._lastTime,d=a._paused;d&&(a._pausedTicks++,a._pausedTime+=g);a._lastTime=c;for(var h=a._pauseable,f=a._listeners.slice(),i=f?f.length:0,e=0;e<i;e++){var b=f[e];b==null||d&&h[e]||(b.tick?b.tick(g,d):b instanceof Function&&b(g,d))}for(a._tickTimes.unshift(a._getTime()-c);a._tickTimes.length>100;)a._tickTimes.pop();for(a._times.unshift(c);a._times.length>100;)a._times.pop()};var b=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);a._getTime=function(){return b&&b.call(performance)||+new Date};GL.Ticker=a})();this.GL=this.GL||{};(function(){var b=function(a,i,b,d,e,c,f,g,h){this.initialize(a,i,b,d,e,c,f,g,h)},a=b.prototype;a.stageX=0;a.stageY=0;a.rawX=0;a.rawY=0;a.type=null;a.nativeEvent=null;a.onMouseMove=null;a.onMouseUp=null;a.target=null;a.pointerID=0;a.primary=false;a.initialize=function(e,d,a,g,h,f,i,b,c){this.type=e;this.stageX=d;this.stageY=a;this.target=g;this.nativeEvent=h;this.pointerID=f;this.primary=i;this.rawX=b==null?d:b;this.rawY=c==null?a:c};a.clone=function(){return new b(this.type,this.stageX,this.stageY,this.target,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)};a.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"};GL.MouseEvent=b})();this.GL=this.GL||{};(function(){var b=function(a,f,b,d,e,c){this.initialize(a,f,b,d,e,c)},a=b.prototype;b.identity=null;b.DEG_TO_RAD=Math.PI/180;a.a=1;a.b=0;a.c=0;a.d=1;a.tx=0;a.ty=0;a.alpha=1;a.shadow=null;a.compositeOperation=null;a.initialize=function(a,f,c,b,e,d){if(a!=null)this.a=a;this.b=f||0;this.c=c||0;if(b!=null)this.d=b;this.tx=e||0;this.ty=d||0;return this};a.prepend=function(a,d,b,c,i,h){var e=this.tx;if(a!=1||d!=0||b!=0||c!=1){var f=this.a,g=this.c;this.a=f*a+this.b*b;this.b=f*d+this.b*c;this.c=g*a+this.d*b;this.d=g*d+this.d*c}this.tx=e*a+this.ty*b+i;this.ty=e*d+this.ty*c+h;return this};a.append=function(e,j,f,h,i,g){var a=this.a,b=this.b,c=this.c,d=this.d;this.a=e*a+j*c;this.b=e*b+j*d;this.c=f*a+h*c;this.d=f*b+h*d;this.tx=i*a+g*c+this.tx;this.ty=i*b+g*d+this.ty;return this};a.prependMatrix=function(a){this.prepend(a.a,a.b,a.c,a.d,a.tx,a.ty);this.prependProperties(a.alpha,a.shadow,a.compositeOperation);return this};a.appendMatrix=function(a){this.append(a.a,a.b,a.c,a.d,a.tx,a.ty);this.appendProperties(a.alpha,a.shadow,a.compositeOperation);return this};a.prependTransform=function(h,k,d,e,a,f,g,i,j){if(a%360)var c=a*b.DEG_TO_RAD,a=Math.cos(c),c=Math.sin(c);else a=1,c=0;if(i||j)this.tx-=i,this.ty-=j;f||g?(f*=b.DEG_TO_RAD,g*=b.DEG_TO_RAD,this.prepend(a*d,c*d,-c*e,a*e,0,0),this.prepend(Math.cos(g),Math.sin(g),-Math.sin(f),Math.cos(f),h,k)):this.prepend(a*d,c*d,-c*e,a*e,h,k);return this};a.appendTransform=function(j,k,d,e,a,f,g,h,i){if(a%360)var c=a*b.DEG_TO_RAD,a=Math.cos(c),c=Math.sin(c);else a=1,c=0;f||g?(f*=b.DEG_TO_RAD,g*=b.DEG_TO_RAD,this.append(Math.cos(g),Math.sin(g),-Math.sin(f),Math.cos(f),j,k),this.append(a*d,c*d,-c*e,a*e,0,0)):this.append(a*d,c*d,-c*e,a*e,j,k);if(h||i)this.tx-=h*this.a+i*this.c,this.ty-=h*this.b+i*this.d;return this};a.rotate=function(a){var b=Math.cos(a),a=Math.sin(a),c=this.a,e=this.c,d=this.tx;this.a=c*b-this.b*a;this.b=c*a+this.b*b;this.c=e*b-this.d*a;this.d=e*a+this.d*b;this.tx=d*b-this.ty*a;this.ty=d*a+this.ty*b;return this};a.skew=function(a,c){a*=b.DEG_TO_RAD;c*=b.DEG_TO_RAD;this.append(Math.cos(c),Math.sin(c),-Math.sin(a),Math.cos(a),0,0);return this};a.scale=function(a,b){this.a*=a;this.d*=b;this.tx*=a;this.ty*=b;return this};a.translate=function(a,b){this.tx+=a;this.ty+=b;return this};a.identity=function(){this.alpha=this.a=this.d=1;this.b=this.c=this.tx=this.ty=0;this.shadow=this.compositeOperation=null;return this};a.invert=function(){var b=this.a,e=this.b,c=this.c,d=this.d,f=this.tx,a=b*d-e*c;this.a=d/a;this.b=-e/a;this.c=-c/a;this.d=b/a;this.tx=(c*this.ty-d*f)/a;this.ty=-(b*this.ty-e*f)/a;return this};a.isIdentity=function(){return this.tx==0&&this.ty==0&&this.a==1&&this.b==0&&this.c==0&&this.d==1};a.decompose=function(a){a==null&&(a={});a.x=this.tx;a.y=this.ty;a.scaleX=Math.sqrt(this.a*this.a+this.b*this.b);a.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var d=Math.atan2(-this.c,this.d),c=Math.atan2(this.b,this.a);d==c?(a.rotation=c/b.DEG_TO_RAD,this.a<0&&this.d>=0&&(a.rotation+=a.rotation<=0?180:-180),a.skewX=a.skewY=0):(a.skewX=d/b.DEG_TO_RAD,a.skewY=c/b.DEG_TO_RAD);return a};a.reinitialize=function(a,b,g,d,c,e,f,h,i){this.initialize(a,b,g,d,c,e);this.alpha=f||1;this.shadow=h;this.compositeOperation=i;return this};a.appendProperties=function(a,b,c){this.alpha*=a;this.shadow=b||this.shadow;this.compositeOperation=c||this.compositeOperation;return this};a.prependProperties=function(a,b,c){this.alpha*=a;this.shadow=this.shadow||b;this.compositeOperation=this.compositeOperation||c;return this};a.clone=function(){var a=new b(this.a,this.b,this.c,this.d,this.tx,this.ty);a.shadow=this.shadow;a.alpha=this.alpha;a.compositeOperation=this.compositeOperation;return a};a.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"};b.identity=new b(1,0,0,1,0,0);GL.Matrix2D=b})();this.GL=this.GL||{};(function(){var b=function(a,b){this.initialize(a,b)},a=b.prototype;a.x=0;a.y=0;a.initialize=function(a,b){this.x=a==null?0:a;this.y=b==null?0:b};a.clone=function(){return new b(this.x,this.y)};a.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"};GL.Point=b})();this.GL=this.GL||{};(function(){var b=function(a,b,d,c){this.initialize(a,b,d,c)},a=b.prototype;a.x=0;a.y=0;a.width=0;a.height=0;a.initialize=function(a,b,d,c){this.x=a==null?0:a;this.y=b==null?0:b;this.width=d==null?0:d;this.height=c==null?0:c};a.clone=function(){return new b(this.x,this.y,this.width,this.height)};a.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"};GL.Rectangle=b})();this.GL=this.GL||{};(function(){var b=function(a,b,d,c){this.initialize(a,b,d,c)},a=b.prototype;b.identity=null;a.color=null;a.offsetX=0;a.offsetY=0;a.blur=0;a.initialize=function(a,b,d,c){this.color=a;this.offsetX=b;this.offsetY=d;this.blur=c};a.toString=function(){return"[Shadow]"};a.clone=function(){return new b(this.color,this.offsetX,this.offsetY,this.blur)};b.identity=new b("transparent",0,0,0);GL.Shadow=b})();this.GL=this.GL||{};(function(){var b=function(a){this.initialize(a)},a=b.prototype;a.complete=true;a.onComplete=null;a._animations=null;a._frames=null;a._images=null;a._data=null;a._loadCount=0;a._frameHeight=0;a._frameWidth=0;a._numFrames=0;a._regX=0;a._regY=0;a.initialize=function(a){var c,d,e;if(a!=null){if(a.images&&(d=a.images.length)>0){e=this._images=[];for(c=0;c<d;c++){var f=a.images[c];if(typeof f=="string"){var b=f,f=new Image;f.src=b}e.push(f);if(!f.getContext&&!f.complete)this._loadCount++,this.complete=false,function(a){f.onload=function(){a._handleImageLoad()}}(this)}}if(a.frames!=null)if(a.frames instanceof Array){this._frames=[];e=a.frames;for(c=0,d=e.length;c<d;c++)b=e[c],this._frames.push({image:this._images[b[4]?b[4]:0],rect:new GL.Rectangle(b[0],b[1],b[2],b[3]),regX:b[5]||0,regY:b[6]||0})}else d=a.frames,this._frameWidth=d.width,this._frameHeight=d.height,this._regX=d.regX||0,this._regY=d.regY||0,this._numFrames=d.count,this._loadCount==0&&this._calculateFrames();if((d=a.animations)!=null){this._animations=[];this._data={};for(var g in d){a={name:g};b=d[g];if(isNaN(b))if(b instanceof Array){a.frequency=b[3];a.next=b[2];e=a.frames=[];for(c=b[0];c<=b[1];c++)e.push(c)}else a.frequency=b.frequency,a.next=b.next,c=b.frames,e=a.frames=!isNaN(c)?[c]:c.slice(0);else e=a.frames=[b];a.next=e.length<2||a.next==false?null:a.next==null||a.next==true?g:a.next;if(!a.frequency)a.frequency=1;this._animations.push(g);this._data[g]=a}}}};a.getNumFrames=function(a){return a==null?this._frames?this._frames.length:this._numFrames:(a=this._data[a],a==null?0:a.frames.length)};a.getAnimations=function(){return this._animations.slice(0)};a.getAnimation=function(a){return this._data[a]};a.getFrame=function(a){return this.complete&&this._frames&&(frame=this._frames[a])?frame:null};a.toString=function(){return"[SpriteSheet]"};a.clone=function(){var a=new b;a.complete=this.complete;a._animations=this._animations;a._frames=this._frames;a._images=this._images;a._data=this._data;a._frameHeight=this._frameHeight;a._frameWidth=this._frameWidth;a._numFrames=this._numFrames;a._loadCount=this._loadCount;return a};a._handleImageLoad=function(){if(--this._loadCount==0)this._calculateFrames(),this.complete=true,this.onComplete&&this.onComplete()};a._calculateFrames=function(){if(!(this._frames||this._frameWidth==0)){this._frames=[];for(var d=0,e=this._frameWidth,h=this._frameHeight,f=0,i=this._images;f<i.length;f++){for(var g=i[f],a=(g.width+1)/e|0,b=(g.height+1)/h|0,b=this._numFrames>0?Math.min(this._numFrames-d,a*b):a*b,c=0;c<b;c++)this._frames.push({image:g,rect:new GL.Rectangle(c%a*e,(c/a|0)*h,e,h),regX:this._regX,regY:this._regY});d+=b}this._numFrames=d}};GL.SpriteSheet=b})();this.GL=this.GL||{};(function(){function b(b,c,a){this.f=b;this.params=c;this.path=a==null?true:a}b.prototype.exec=function(a){this.f.apply(a,this.params)};var c=function(){this.initialize()},a=c.prototype;c.getRGB=function(a,b,c,d){a!=null&&c==null&&(d=b,c=a&255,b=a>>8&255,a=a>>16&255);return d==null?"rgb("+a+","+b+","+c+")":"rgba("+a+","+b+","+c+","+d+")"};c.getHSL=function(a,b,c,d){return d==null?"hsl("+a%360+","+b+"%,"+c+"%)":"hsla("+a%360+","+b+"%,"+c+"%,"+d+")"};c.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63};c.STROKE_CAPS_MAP=["butt","round","square"];c.STROKE_JOINTS_MAP=["miter","round","bevel"];c._ctx=(GL.createCanvas?GL.createCanvas():document.createElement("canvas")).getContext("2d");c.beginCmd=new b(c._ctx.beginPath,[],false);c.fillCmd=new b(c._ctx.fill,[],false);c.strokeCmd=new b(c._ctx.stroke,[],false);a._strokeInstructions=null;a._strokeStyleInstructions=null;a._fillInstructions=null;a._instructions=null;a._oldInstructions=null;a._activeInstructions=null;a._active=false;a._dirty=false;a.initialize=function(){this.clear();this._ctx=c._ctx};a.draw=function(c){this._dirty&&this._updateInstructions();for(var b=this._instructions,a=0,d=b.length;a<d;a++)b[a].exec(c)};a.drawAsPath=function(d){this._dirty&&this._updateInstructions();for(var b,c=this._instructions,a=0,e=c.length;a<e;a++)((b=c[a]).path||a==0)&&b.exec(d)};a.moveTo=function(a,c){this._activeInstructions.push(new b(this._ctx.moveTo,[a,c]));return this};a.lineTo=function(a,c){this._dirty=this._active=true;this._activeInstructions.push(new b(this._ctx.lineTo,[a,c]));return this};a.arcTo=function(a,c,d,e,f){this._dirty=this._active=true;this._activeInstructions.push(new b(this._ctx.arcTo,[a,c,d,e,f]));return this};a.arc=function(c,d,e,f,g,a){this._dirty=this._active=true;a==null&&(a=false);this._activeInstructions.push(new b(this._ctx.arc,[c,d,e,f,g,a]));return this};a.quadraticCurveTo=function(a,c,d,e){this._dirty=this._active=true;this._activeInstructions.push(new b(this._ctx.quadraticCurveTo,[a,c,d,e]));return this};a.bezierCurveTo=function(a,c,d,e,f,g){this._dirty=this._active=true;this._activeInstructions.push(new b(this._ctx.bezierCurveTo,[a,c,d,e,f,g]));return this};a.rect=function(a,c,d,e){this._dirty=this._active=true;this._activeInstructions.push(new b(this._ctx.rect,[a,c,d,e]));return this};a.closePath=function(){if(this._active)this._dirty=true,this._activeInstructions.push(new b(this._ctx.closePath,[]));return this};a.clear=function(){this._instructions=[];this._oldInstructions=[];this._activeInstructions=[];this._strokeStyleInstructions=this._strokeInstructions=this._fillInstructions=null;this._active=this._dirty=false;return this};a.beginFill=function(a){this._active&&this._newPath();this._fillInstructions=a?[new b(this._setProp,["fillStyle",a],false)]:null;return this};a.beginLinearGradientFill=function(e,f,c,a,d,g){this._active&&this._newPath();c=this._ctx.createLinearGradient(c,a,d,g);a=0;for(d=e.length;a<d;a++)c.addColorStop(f[a],e[a]);this._fillInstructions=[new b(this._setProp,["fillStyle",c],false)];return this};a.beginRadialGradientFill=function(e,f,c,a,d,g,h,i){this._active&&this._newPath();c=this._ctx.createRadialGradient(c,a,d,g,h,i);a=0;for(d=e.length;a<d;a++)c.addColorStop(f[a],e[a]);this._fillInstructions=[new b(this._setProp,["fillStyle",c],false)];return this};a.beginBitmapFill=function(a,c){this._active&&this._newPath();var d=this._ctx.createPattern(a,c||"");this._fillInstructions=[new b(this._setProp,["fillStyle",d],false)];return this};a.endFill=function(){return this.beginFill()};a.setStrokeStyle=function(e,d,a,f){this._active&&this._newPath();this._strokeStyleInstructions=[new b(this._setProp,["lineWidth",e==null?"1":e],false),new b(this._setProp,["lineCap",d==null?"butt":isNaN(d)?d:c.STROKE_CAPS_MAP[d]],false),new b(this._setProp,["lineJoin",a==null?"miter":isNaN(a)?a:c.STROKE_JOINTS_MAP[a]],false),new b(this._setProp,["miterLimit",f==null?"10":f],false)];return this};a.beginStroke=function(a){this._active&&this._newPath();this._strokeInstructions=a?[new b(this._setProp,["strokeStyle",a],false)]:null;return this};a.beginLinearGradientStroke=function(e,f,c,a,d,g){this._active&&this._newPath();c=this._ctx.createLinearGradient(c,a,d,g);a=0;for(d=e.length;a<d;a++)c.addColorStop(f[a],e[a]);this._strokeInstructions=[new b(this._setProp,["strokeStyle",c],false)];return this};a.beginRadialGradientStroke=function(e,f,c,a,d,g,h,i){this._active&&this._newPath();c=this._ctx.createRadialGradient(c,a,d,g,h,i);a=0;for(d=e.length;a<d;a++)c.addColorStop(f[a],e[a]);this._strokeInstructions=[new b(this._setProp,["strokeStyle",c],false)];return this};a.beginBitmapStroke=function(a,c){this._active&&this._newPath();var d=this._ctx.createPattern(a,c||"");this._strokeInstructions=[new b(this._setProp,["strokeStyle",d],false)];return this};a.endStroke=function(){this.beginStroke();return this};a.curveTo=a.quadraticCurveTo;a.drawRect=a.rect;a.drawRoundRect=function(b,c,d,e,a){this.drawRoundRectComplex(b,c,d,e,a,a,a,a);return this};a.drawRoundRectComplex=function(a,c,i,j,e,f,g,h){var d=(i<j?i:j)/2,k=0,m=0,l=0,o=0;e<0&&(e*=k=-1);e>d&&(e=d);f<0&&(f*=m=-1);f>d&&(f=d);g<0&&(g*=l=-1);g>d&&(g=d);h<0&&(h*=o=-1);h>d&&(h=d);this._dirty=this._active=true;var d=this._ctx.arcTo,n=this._ctx.lineTo;this._activeInstructions.push(new b(this._ctx.moveTo,[a+i-f,c]),new b(d,[a+i+f*m,c-f*m,a+i,c+f,f]),new b(n,[a+i,c+j-g]),new b(d,[a+i+g*l,c+j+g*l,a+i-g,c+j,g]),new b(n,[a+h,c+j]),new b(d,[a-h*o,c+j+h*o,a,c+j-h,h]),new b(n,[a,c+e]),new b(d,[a-e*k,c-e*k,a+e,c,e]),new b(this._ctx.closePath));return this};a.drawCircle=function(a,b,c){this.arc(a,b,c,0,Math.PI*2);return this};a.drawEllipse=function(d,e,c,a){this._dirty=this._active=true;var f=c/2*.5522848,g=a/2*.5522848,h=d+c,i=e+a,c=d+c/2,a=e+a/2;this._activeInstructions.push(new b(this._ctx.moveTo,[d,a]),new b(this._ctx.bezierCurveTo,[d,a-g,c-f,e,c,e]),new b(this._ctx.bezierCurveTo,[c+f,e,h,a-g,h,a]),new b(this._ctx.bezierCurveTo,[h,a+g,c+f,i,c,i]),new b(this._ctx.bezierCurveTo,[c-f,i,d,a+g,d,a]));return this};a.drawPolyStar=function(e,f,d,g,c,a){this._dirty=this._active=true;c==null&&(c=0);c=1-c;a==null?a=0:a/=180/Math.PI;var h=Math.PI/g;this._activeInstructions.push(new b(this._ctx.moveTo,[e+Math.cos(a)*d,f+Math.sin(a)*d]));for(var i=0;i<g;i++)a+=h,c!=1&&this._activeInstructions.push(new b(this._ctx.lineTo,[e+Math.cos(a)*d*c,f+Math.sin(a)*d*c])),a+=h,this._activeInstructions.push(new b(this._ctx.lineTo,[e+Math.cos(a)*d,f+Math.sin(a)*d]));return this};a.decodePath=function(f){for(var m=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo],n=[2,2,4,6],b=0,o=f.length,i=[],j=0,k=0,g=c.BASE_64;b<o;){var h=f.charAt(b),e=g[h],d=e>>3,l=m[d];if(!l||e&3)throw"bad path data (@"+b+"): "+h;h=n[d];d||(j=k=0);i.length=0;b++;e=(e>>2&1)+2;for(d=0;d<h;d++){var a=g[f.charAt(b)],p=a>>5?-1:1,a=(a&31)<<6|g[f.charAt(b+1)];e==3&&(a=a<<6|g[f.charAt(b+2)]);a=p*a/10;d%2?j=a+=j:k=a+=k;i[d]=a;b+=e}l.apply(this,i)}return this};a.clone=function(){var a=new c;a._instructions=this._instructions.slice();a._activeInstructions=this._activeInstructions.slice();a._oldInstructions=this._oldInstructions.slice();if(this._fillInstructions)a._fillInstructions=this._fillInstructions.slice();if(this._strokeInstructions)a._strokeInstructions=this._strokeInstructions.slice();if(this._strokeStyleInstructions)a._strokeStyleInstructions=this._strokeStyleInstructions.slice();a._active=this._active;a._dirty=this._dirty;a.drawAsPath=this.drawAsPath;return a};a.toString=function(){return"[Graphics]"};a.mt=a.moveTo;a.lt=a.lineTo;a.at=a.arcTo;a.bt=a.bezierCurveTo;a.qt=a.quadraticCurveTo;a.a=a.arc;a.r=a.rect;a.cp=a.closePath;a.c=a.clear;a.f=a.beginFill;a.lf=a.beginLinearGradientFill;a.rf=a.beginRadialGradientFill;a.bf=a.beginBitmapFill;a.ef=a.endFill;a.ss=a.setStrokeStyle;a.s=a.beginStroke;a.ls=a.beginLinearGradientStroke;a.rs=a.beginRadialGradientStroke;a.bs=a.beginBitmapStroke;a.es=a.endStroke;a.dr=a.drawRect;a.rr=a.drawRoundRect;a.rc=a.drawRoundRectComplex;a.dc=a.drawCircle;a.de=a.drawEllipse;a.dp=a.drawPolyStar;a.p=a.decodePath;a._updateInstructions=function(){this._instructions=this._oldInstructions.slice();this._instructions.push(c.beginCmd);this._fillInstructions&&this._instructions.push.apply(this._instructions,this._fillInstructions);this._strokeInstructions&&(this._instructions.push.apply(this._instructions,this._strokeInstructions),this._strokeStyleInstructions&&this._instructions.push.apply(this._instructions,this._strokeStyleInstructions));this._instructions.push.apply(this._instructions,this._activeInstructions);this._fillInstructions&&this._instructions.push(c.fillCmd);this._strokeInstructions&&this._instructions.push(c.strokeCmd)};a._getEllipseArc=function(d,e,c,a){var f=c/2*.5522848,g=a/2*.5522848,h=d+c,i=e+a,c=d+c/2,a=e+a/2;this._activeInstructions.push(new b(this._ctx.moveTo,[d,a]),new b(this._ctx.bezierCurveTo,[d,a-g,c-f,e,c,e]),new b(this._ctx.bezierCurveTo,[c+f,e,h,a-g,h,a]),new b(this._ctx.bezierCurveTo,[h,a+g,c+f,i,c,i]),new b(this._ctx.bezierCurveTo,[c-f,i,d,a+g,d,a]));return this};a._newPath=function(){this._dirty&&this._updateInstructions();this._oldInstructions=this._instructions;this._activeInstructions=[];this._active=this._dirty=false};a._setProp=function(a,b){this[a]=b};GL.Graphics=c})();this.GL=this.GL||{};(function(){var b=function(){this.initialize()},a=b.prototype;b.suppressCrossDomainErrors=false;b._hitTestCanvas=GL.createCanvas?GL.createCanvas():document.createElement("canvas");b._hitTestCanvas.width=b._hitTestCanvas.height=1;b._hitTestContext=b._hitTestCanvas.getContext("2d");b._nextCacheID=1;a.alpha=1;a.cacheCanvas=null;a.id=-1;a.mouseEnabled=true;a.name=null;a.parent=null;a.regX=0;a.regY=0;a.rotation=0;a.scaleX=1;a.scaleY=1;a.skewX=0;a.skewY=0;a.shadow=null;a.visible=true;a.x=0;a.y=0;a.compositeOperation=null;a.snapToPixel=false;a.onPress=null;a.onClick=null;a.onDoubleClick=null;a.onMouseOver=null;a.onMouseOut=null;a.onTick=null;a.filters=null;a.cacheID=0;a.mask=null;a.hitArea=null;a._cacheOffsetX=0;a._cacheOffsetY=0;a._cacheScale=1;a._cacheDataURLID=0;a._cacheDataURL=null;a._matrix=null;a.initialize=function(){this.id=GL.UID.get();this._matrix=new GL.Matrix2D};a.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0};a.draw=function(c,d){var a=this.cacheCanvas;if(d||!a)return false;var b=this._cacheScale;c.drawImage(a,this._cacheOffsetX,this._cacheOffsetY,a.width/b,a.height/b);return true};a.updateContext=function(b){var a,c=this.mask;c&&c.graphics&&(a=c.getMatrix(c._matrix),b.transform(a.a,a.b,a.c,a.d,a.tx,a.ty),c.graphics.drawAsPath(b),b.clip(),a.invert(),b.transform(a.a,a.b,a.c,a.d,a.tx,a.ty));a=this._matrix.identity().appendTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY,this.regX,this.regY);GL.Stage._snapToPixelEnabled&&this.snapToPixel?b.transform(a.a,a.b,a.c,a.d,a.tx+.5|0,a.ty+.5|0):b.transform(a.a,a.b,a.c,a.d,a.tx,a.ty);b.globalAlpha*=this.alpha;if(this.compositeOperation)b.globalCompositeOperation=this.compositeOperation;this.shadow&&this._applyShadow(b,this.shadow)};a.cache=function(b,c,d,e,a){a=a||1;if(!this.cacheCanvas)this.cacheCanvas=GL.createCanvas?GL.createCanvas():document.createElement("canvas");this.cacheCanvas.width=Math.ceil(d*a);this.cacheCanvas.height=Math.ceil(e*a);this._cacheOffsetX=b;this._cacheOffsetY=c;this._cacheScale=a||1;this.updateCache()};a.updateCache=function(d){var c=this.cacheCanvas,g=this._cacheOffsetX,f=this._cacheOffsetY,e=this._cacheScale;if(!c)throw"cache() must be called before updateCache()";var a=c.getContext("2d");a.save();d||a.clearRect(0,0,c.width,c.height);a.globalCompositeOperation=d;a.setTransform(e,0,0,e,-g,-f);this.draw(a,true);this._applyFilters();a.restore();this.cacheID=b._nextCacheID++};a.uncache=function(){this._cacheDataURL=this.cacheCanvas=null;this.cacheID=this._cacheOffsetX=this._cacheOffsetY=0;this._cacheScale=1};a.getCacheDataURL=function(){if(!this.cacheCanvas)return null;if(this.cacheID!=this._cacheDataURLID)this._cacheDataURL=this.cacheCanvas.toDataURL();return this._cacheDataURL};a.getStage=function(){for(var a=this;a.parent;)a=a.parent;return a instanceof GL.Stage?a:null};a.localToGlobal=function(b,c){var a=this.getConcatenatedMatrix(this._matrix);if(a==null)return null;a.append(1,0,0,1,b,c);return new GL.Point(a.tx,a.ty)};a.globalToLocal=function(b,c){var a=this.getConcatenatedMatrix(this._matrix);if(a==null)return null;a.invert();a.append(1,0,0,1,b,c);return new GL.Point(a.tx,a.ty)};a.localToLocal=function(a,b,c){a=this.localToGlobal(a,b);return c.globalToLocal(a.x,a.y)};a.setTransform=function(c,d,a,b,e,f,g,h,i){this.x=c||0;this.y=d||0;this.scaleX=a==null?1:a;this.scaleY=b==null?1:b;this.rotation=e||0;this.skewX=f||0;this.skewY=g||0;this.regX=h||0;this.regY=i||0;return this};a.getMatrix=function(a){return(a?a.identity():new GL.Matrix2D).appendTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY,this.regX,this.regY).appendProperties(this.alpha,this.shadow,this.compositeOperation)};a.getConcatenatedMatrix=function(b){b?b.identity():b=new GL.Matrix2D;for(var a=this;a!=null;)b.prependTransform(a.x,a.y,a.scaleX,a.scaleY,a.rotation,a.skewX,a.skewY,a.regX,a.regY).prependProperties(a.alpha,a.shadow,a.compositeOperation),a=a.parent;return b};a.hitTest=function(d,e){var a=b._hitTestContext,c=b._hitTestCanvas;a.setTransform(1,0,0,1,-d,-e);this.draw(a);a=this._testHit(a);c.width=0;c.width=1;return a};a.clone=function(){var a=new b;this.cloneProps(a);return a};a.toString=function(){return"[DisplayObject (name="+this.name+")]"};a.cloneProps=function(a){a.alpha=this.alpha;a.name=this.name;a.regX=this.regX;a.regY=this.regY;a.rotation=this.rotation;a.scaleX=this.scaleX;a.scaleY=this.scaleY;a.shadow=this.shadow;a.skewX=this.skewX;a.skewY=this.skewY;a.visible=this.visible;a.x=this.x;a.y=this.y;a.mouseEnabled=this.mouseEnabled;a.compositeOperation=this.compositeOperation;if(this.cacheCanvas)a.cacheCanvas=this.cacheCanvas.cloneNode(true),a.cacheCanvas.getContext("2d").putImageData(this.cacheCanvas.getContext("2d").getImageData(0,0,this.cacheCanvas.width,this.cacheCanvas.height),0,0)};a._applyShadow=function(b,a){a=a||Shadow.identity;b.shadowColor=a.color;b.shadowOffsetX=a.offsetX;b.shadowOffsetY=a.offsetY;b.shadowBlur=a.blur};a._tick=function(a){if(this.onTick)if(a)this.onTick.apply(this,a);else this.onTick()};a._testHit=function(a){try{var c=a.getImageData(0,0,1,1).data[3]>1}catch(d){if(!b.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images.";}return c};a._applyFilters=function(){if(this.filters&&this.filters.length!=0&&this.cacheCanvas)for(var b=this.filters.length,c=this.cacheCanvas.getContext("2d"),d=this.cacheCanvas.width,e=this.cacheCanvas.height,a=0;a<b;a++)this.filters[a].applyFilter(c,0,0,d,e)};GL.DisplayObject=b})();this.GL=this.GL||{};(function(){var b=function(){this.initialize()},a=b.prototype=new GL.DisplayObject;a.children=null;a.DisplayObject_initialize=a.initialize;a.initialize=function(){this.DisplayObject_initialize();this.children=[]};a.isVisible=function(){return this.visible&&this.alpha>0&&this.children.length&&this.scaleX!=0&&this.scaleY!=0};a.DisplayObject_draw=a.draw;a.draw=function(a,e){if(this.DisplayObject_draw(a,e))return true;for(var d=this.children.slice(0),b=0,f=d.length;b<f;b++){var c=d[b];c.isVisible()&&(a.save(),c.updateContext(a),c.draw(a),a.restore())}return true};a.addChild=function(a){if(a==null)return a;var b=arguments.length;if(b>1){for(var c=0;c<b;c++)this.addChild(arguments[c]);return arguments[b-1]}a.parent&&a.parent.removeChild(a);a.parent=this;this.children.push(a);return a};a.addChildAt=function(a,e){var b=arguments.length,d=arguments[b-1];if(d<0||d>this.children.length)return arguments[b-2];if(b>2){for(var c=0;c<b-1;c++)this.addChildAt(arguments[c],d+c);return arguments[b-2]}a.parent&&a.parent.removeChild(a);a.parent=this;this.children.splice(e,0,a);return a};a.removeChild=function(d){var c=arguments.length;if(c>1){for(var a=true,b=0;b<c;b++)a=a&&this.removeChild(arguments[b]);return a}return this.removeChildAt(this.children.indexOf(d))};a.removeChildAt=function(c){var b=arguments.length;if(b>1){for(var d=[],a=0;a<b;a++)d[a]=arguments[a];d.sort(function(a,b){return b-a});for(var e=true,a=0;a<b;a++)e=e&&this.removeChildAt(d[a]);return e}if(c<0||c>this.children.length-1)return false;if(b=this.children[c])b.parent=null;this.children.splice(c,1);return true};a.removeAllChildren=function(){for(var a=this.children;a.length;)a.pop().parent=null};a.getChildAt=function(a){return this.children[a]};a.sortChildren=function(a){this.children.sort(a)};a.getChildIndex=function(a){return this.children.indexOf(a)};a.getNumChildren=function(){return this.children.length};a.swapChildrenAt=function(b,c){var a=this.children,d=a[b],e=a[c];d&&e&&(a[b]=e,a[c]=d)};a.swapChildren=function(e,f){for(var b=this.children,c,d,a=0,g=b.length;a<g;a++)if(b[a]==e&&(c=a),b[a]==f&&(d=a),c!=null&&d!=null)break;a!=g&&(b[c]=f,b[d]=e)};a.setChildIndex=function(d,b){var c=this.children,e=c.length;if(!(d.parent!=this||b<0||b>=e)){for(var a=0;a<e;a++)if(c[a]==d)break;a==e||a==b||(c.splice(a,1),b<a&&b--,c.splice(b,0,d))}};a.contains=function(a){for(;a;){if(a==this)return true;a=a.parent}return false};a.hitTest=function(a,b){return this.getObjectUnderPoint(a,b)!=null};a.getObjectsUnderPoint=function(c,d){var a=[],b=this.localToGlobal(c,d);this._getObjectsUnderPoint(b.x,b.y,a);return a};a.getObjectUnderPoint=function(b,c){var a=this.localToGlobal(b,c);return this._getObjectsUnderPoint(a.x,a.y)};a.clone=function(d){var a=new b;this.cloneProps(a);if(d)for(var g=a.children=[],c=0,f=this.children.length;c<f;c++){var e=this.children[c].clone(d);e.parent=a;g.push(e)}return a};a.toString=function(){return"[Container (name="+this.name+")]"};a.DisplayObject__tick=a._tick;a._tick=function(b){for(var a=this.children.length-1;a>=0;a--){var c=this.children[a];c._tick&&c._tick(b)}this.DisplayObject__tick(b)};a._getObjectsUnderPoint=function(g,h,j,f){var e=GL.DisplayObject._hitTestContext,i=GL.DisplayObject._hitTestCanvas,c=this._matrix,k=f&1&&(this.onPress||this.onClick||this.onDoubleClick)||f&2&&(this.onMouseOver||this.onMouseOut);if(this.cacheCanvas&&k&&(this.getConcatenatedMatrix(c),e.setTransform(c.a,c.b,c.c,c.d,c.tx-g,c.ty-h),e.globalAlpha=c.alpha,this.draw(e),this._testHit(e)))return i.width=0,i.width=1,this;for(var l=this.children.length-1;l>=0;l--){var a=this.children[l];if(a.isVisible()&&a.mouseEnabled)if(a instanceof b){if(k){if(a=a._getObjectsUnderPoint(g,h))return this}else if(a=a._getObjectsUnderPoint(g,h,j,f),!j&&a)return a}else if(!f||k||f&1&&(a.onPress||a.onClick||a.onDoubleClick)||f&2&&(a.onMouseOver||a.onMouseOut)){var d=a.hitArea;a.getConcatenatedMatrix(c);d&&(c.appendTransform(d.x+a.regX,d.y+a.regY,d.scaleX,d.scaleY,d.rotation,d.skewX,d.skewY,d.regX,d.regY),c.alpha*=d.alpha/a.alpha);e.globalAlpha=c.alpha;e.setTransform(c.a,c.b,c.c,c.d,c.tx-g,c.ty-h);(d||a).draw(e);if(this._testHit(e))if(i.width=0,i.width=1,k)return this;else if(j)j.push(a);else return a}}return null};GL.Container=b})();this.GL=this.GL||{};(function(){var b=function(a){this.initialize(a)},a=b.prototype=new GL.Container;b._snapToPixelEnabled=false;a.autoClear=true;a.canvas=null;a.mouseX=0;a.mouseY=0;a.onMouseMove=null;a.onMouseUp=null;a.onMouseDown=null;a.snapToPixelEnabled=false;a.mouseInBounds=false;a.tickOnUpdate=true;a.mouseMoveOutside=false;a._pointerData=null;a._pointerCount=0;a._primaryPointerID=null;a._mouseOverIntervalID=null;a.Container_initialize=a.initialize;a.initialize=function(a){this.Container_initialize();this.canvas=a instanceof HTMLCanvasElement?a:document.getElementById(a);this._pointerData={};this._enableMouseEvents(true)};a.update=function(){if(this.canvas){this.autoClear&&this.clear();b._snapToPixelEnabled=this.snapToPixelEnabled;this.tickOnUpdate&&this._tick(arguments.length?arguments:null);var a=this.canvas.getContext("2d");a.save();this.updateContext(a);this.draw(a,false);a.restore()}};a.tick=a.update;a.clear=function(){if(this.canvas){var a=this.canvas.getContext("2d");a.setTransform(1,0,0,1,0,0);a.clearRect(0,0,this.canvas.width,this.canvas.height)}};a.toDataURL=function(b,c){c||(c="image/png");var a=this.canvas.getContext("2d"),d=this.canvas.width,e=this.canvas.height,f;if(b){f=a.getImageData(0,0,d,e);var g=a.globalCompositeOperation;a.globalCompositeOperation="destination-over";a.fillStyle=b;a.fillRect(0,0,d,e)}var h=this.canvas.toDataURL(c);if(b)a.clearRect(0,0,d,e),a.putImageData(f,0,0),a.globalCompositeOperation=g;return h};a.enableMouseOver=function(a){if(this._mouseOverIntervalID)clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null;if(a==null)a=20;else if(a<=0)return;var b=this;this._mouseOverIntervalID=setInterval(function(){b._testMouseOver()},1e3/Math.min(50,a))};a.clone=function(){var a=new b(null);this.cloneProps(a);return a};a.toString=function(){return"[Stage (name="+this.name+")]"};a._enableMouseEvents=function(){var a=this,b=window.addEventListener?window:document;b.addEventListener("mouseup",function(b){a._handleMouseUp(b)},false);b.addEventListener("mousemove",function(b){a._handleMouseMove(b)},false);b.addEventListener("dblclick",function(b){a._handleDoubleClick(b)},false);this.canvas&&this.canvas.addEventListener("mousedown",function(b){a._handleMouseDown(b)},false)};a._getPointerData=function(a){var b=this._pointerData[a];if(!b&&(b=this._pointerData[a]={x:0,y:0},this._primaryPointerID==null))this._primaryPointerID=a;return b};a._handleMouseMove=function(a){if(!a)a=window.event;this._handlePointerMove(-1,a,a.pageX,a.pageY)};a._handlePointerMove=function(a,c,d,e){if(this.canvas){var b=this._getPointerData(a),f=b.inBounds;this._updatePointerPosition(a,d,e);if(f||b.inBounds||this.mouseMoveOutside){a=new GL.MouseEvent("onMouseMove",b.x,b.y,this,c,a,a==this._primaryPointerID,b.rawX,b.rawY);if(this.onMouseMove)this.onMouseMove(a);if(b.event&&b.event.onMouseMove)a=a.clone(),a.target=b.event.target,b.event.onMouseMove(a)}}};a._updatePointerPosition=function(f,b,c){var a=this._getElementRect(this.canvas);b-=a.left;c-=a.top;var d=this.canvas.width,e=this.canvas.height;b/=(a.right-a.left)/d;c/=(a.bottom-a.top)/e;a=this._getPointerData(f);if(a.inBounds=b>=0&&c>=0&&b<=d-1&&c<=e-1)a.x=b,a.y=c;else if(this.mouseMoveOutside)a.x=b<0?0:b>d-1?d-1:b,a.y=c<0?0:c>e-1?e-1:c;a.rawX=b;a.rawY=c;if(f==this._primaryPointerID)this.mouseX=a.x,this.mouseY=a.y,this.mouseInBounds=a.inBounds};a._getElementRect=function(b){var c=b.getBoundingClientRect(),d=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),e=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),a=window.getComputedStyle?getComputedStyle(b):b.currentStyle,b=parseInt(a.paddingLeft)+parseInt(a.borderLeftWidth),f=parseInt(a.paddingTop)+parseInt(a.borderTopWidth),g=parseInt(a.paddingRight)+parseInt(a.borderRightWidth),a=parseInt(a.paddingBottom)+parseInt(a.borderBottomWidth);return{left:c.left+d+b,right:c.right+d-g,top:c.top+e+f,bottom:c.bottom+e-a}};a._handleMouseUp=function(a){this._handlePointerUp(-1,a,false)};a._handlePointerUp=function(b,d,e){var a=this._getPointerData(b),c=new GL.MouseEvent("onMouseUp",a.x,a.y,this,d,b,b==this._primaryPointerID,a.rawX,a.rawY);if(this.onMouseUp)this.onMouseUp(c);if(a.event&&a.event.onMouseUp)c=c.clone(),c.target=a.event.target,a.event.onMouseUp(c);if(a.target&&a.target.onClick&&this._getObjectsUnderPoint(a.x,a.y,null,true,this._mouseOverIntervalID?3:1)==a.target)a.target.onClick(new GL.MouseEvent("onClick",a.x,a.y,a.target,d,b,b==this._primaryPointerID,a.rawX,a.rawY));if(e){if(b==this._primaryPointerID)this._primaryPointerID=null;delete this._pointerData[b]}else a.event=a.target=null};a._handleMouseDown=function(a){this._handlePointerDown(-1,a,false)};a._handlePointerDown=function(b,d,c,e){var a=this._getPointerData(b);e!=null&&this._updatePointerPosition(b,c,e);if(this.onMouseDown)this.onMouseDown(new GL.MouseEvent("onMouseDown",a.x,a.y,this,d,b,b==this._primaryPointerID,a.rawX,a.rawY));if(c=this._getObjectsUnderPoint(a.x,a.y,null,this._mouseOverIntervalID?3:1)){if(c.onPress&&(b=new GL.MouseEvent("onPress",a.x,a.y,c,d,b,b==this._primaryPointerID,a.rawX,a.rawY),c.onPress(b),b.onMouseMove||b.onMouseUp))a.event=b;a.target=c}};a._testMouseOver=function(){if(this._primaryPointerID==-1&&!(this.mouseX==this._mouseOverX&&this.mouseY==this._mouseOverY&&this.mouseInBounds)){var a=null;if(this.mouseInBounds)a=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,3),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY;if(this._mouseOverTarget!=a){if(this._mouseOverTarget&&this._mouseOverTarget.onMouseOut)this._mouseOverTarget.onMouseOut(new GL.MouseEvent("onMouseOut",this.mouseX,this.mouseY,this._mouseOverTarget));if(a&&a.onMouseOver)a.onMouseOver(new GL.MouseEvent("onMouseOver",this.mouseX,this.mouseY,a));this._mouseOverTarget=a}}};a._handleDoubleClick=function(b){if(this.onDoubleClick)this.onDoubleClick(new GL.MouseEvent("onDoubleClick",this.mouseX,this.mouseY,this,b,-1,true));var a=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,this._mouseOverIntervalID?3:1);if(a&&a.onDoubleClick)a.onDoubleClick(new GL.MouseEvent("onDoubleClick",this.mouseX,this.mouseY,a,b,-1,true))};GL.Stage=b})();this.GL=this.GL||{};(function(){var b=function(a){this.initialize(a)},a=b.prototype=new GL.DisplayObject;a.image=null;a.snapToPixel=true;a.sourceRect=null;a.DisplayObject_initialize=a.initialize;a.initialize=function(a){this.DisplayObject_initialize();typeof a=="string"?(this.image=new Image,this.image.src=a):this.image=a};a.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this.image&&(this.image.complete||this.image.getContext||this.image.readyState>=2)};a.DisplayObject_draw=a.draw;a.draw=function(b,c){if(this.DisplayObject_draw(b,c))return true;var a=this.sourceRect;a?b.drawImage(this.image,a.x,a.y,a.width,a.height,0,0,a.width,a.height):b.drawImage(this.image,0,0);return true};a.clone=function(){var a=new b(this.image);this.cloneProps(a);return a};a.toString=function(){return"[Bitmap (name="+this.name+")]"};GL.Bitmap=b})();this.GL=this.GL||{};(function(){var b=function(a){this.initialize(a)},a=b.prototype=new GL.DisplayObject;a.onAnimationEnd=null;a.currentFrame=-1;a.currentAnimation=null;a.paused=true;a.spriteSheet=null;a.snapToPixel=true;a.offset=0;a.currentAnimationFrame=0;a._advanceCount=0;a._animation=null;a.DisplayObject_initialize=a.initialize;a.initialize=function(a){this.DisplayObject_initialize();this.spriteSheet=a};a.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this.spriteSheet.complete&&this.currentFrame>=0};a.DisplayObject_draw=a.draw;a.draw=function(c,d){if(this.DisplayObject_draw(c,d))return true;this._normalizeFrame();var b=this.spriteSheet.getFrame(this.currentFrame);if(b!=null){var a=b.rect;c.drawImage(b.image,a.x,a.y,a.width,a.height,-b.regX,-b.regY,a.width,a.height);return true}};a.play=function(){this.paused=false};a.stop=function(){this.paused=true};a.gotoAndPlay=function(a){this.paused=false;this._goto(a)};a.gotoAndStop=function(a){this.paused=true;this._goto(a)};a.advance=function(){this._animation?this.currentAnimationFrame++:this.currentFrame++;this._normalizeFrame()};a.clone=function(){var a=new b(this.spriteSheet);this.cloneProps(a);return a};a.toString=function(){return"[BitmapAnimation (name="+this.name+")]"};a.DisplayObject__tick=a._tick;a._tick=function(a){var b=this._animation?this._animation.frequency:1;!this.paused&&(++this._advanceCount+this.offset)%b==0&&this.advance();this.DisplayObject__tick(a)};a._normalizeFrame=function(){var a=this._animation;if(a)if(this.currentAnimationFrame>=a.frames.length){if(a.next?this._goto(a.next):(this.paused=true,this.currentAnimationFrame=a.frames.length-1,this.currentFrame=a.frames[this.currentAnimationFrame]),this.onAnimationEnd)this.onAnimationEnd(this,a.name)}else this.currentFrame=a.frames[this.currentAnimationFrame];else if(this.currentFrame>=this.spriteSheet.getNumFrames()&&(this.currentFrame=0,this.onAnimationEnd))this.onAnimationEnd(this,null)};a.DisplayObject_cloneProps=a.cloneProps;a.cloneProps=function(a){this.DisplayObject_cloneProps(a);a.onAnimationEnd=this.onAnimationEnd;a.currentFrame=this.currentFrame;a.currentAnimation=this.currentAnimation;a.paused=this.paused;a.offset=this.offset;a._animation=this._animation;a.currentAnimationFrame=this.currentAnimationFrame};a._goto=function(a){if(isNaN(a)){var b=this.spriteSheet.getAnimation(a);if(b)this.currentAnimationFrame=0,this._animation=b,this.currentAnimation=a,this._normalizeFrame()}else this.currentAnimation=this._animation=null,this.currentFrame=a};GL.BitmapAnimation=b})();this.GL=this.GL||{};(function(){var b=function(a){this.initialize(a)},a=b.prototype=new GL.DisplayObject;a.graphics=null;a.DisplayObject_initialize=a.initialize;a.initialize=function(a){this.DisplayObject_initialize();this.graphics=a?a:new GL.Graphics};a.isVisible=function(){return Boolean(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this.graphics)};a.DisplayObject_draw=a.draw;a.draw=function(a,b){if(this.DisplayObject_draw(a,b))return true;this.graphics.draw(a);return true};a.clone=function(a){a=new b(a&&this.graphics?this.graphics.clone():this.graphics);this.cloneProps(a);return a};a.toString=function(){return"[Shape (name="+this.name+")]"};GL.Shape=b})();this.GL=this.GL||{};(function(){var b=function(a,b,c){this.initialize(a,b,c)},a=b.prototype=new GL.DisplayObject;b._workingContext=(GL.createCanvas?GL.createCanvas():document.createElement("canvas")).getContext("2d");a.text="";a.font=null;a.color="#000";a.textAlign="left";a.textBaseline="top";a.maxWidth=null;a.outline=false;a.lineHeight=0;a.lineWidth=null;a.DisplayObject_initialize=a.initialize;a.initialize=function(b,c,a){this.DisplayObject_initialize();this.text=b;this.font=c;this.color=a?a:"#000"};a.isVisible=function(){return Boolean(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this.text!=null&&this.text!=="")};a.DisplayObject_draw=a.draw;a.draw=function(a,b){if(this.DisplayObject_draw(a,b))return true;this.outline?a.strokeStyle=this.color:a.fillStyle=this.color;a.font=this.font;a.textAlign=this.textAlign||"start";a.textBaseline=this.textBaseline||"alphabetic";this._drawText(a);return true};a.getMeasuredWidth=function(){return this._getWorkingContext().measureText(this.text).width};a.getMeasuredLineHeight=function(){return this._getWorkingContext().measureText("M").width*1.2};a.getMeasuredHeight=function(){return this._drawText()*(this.lineHeight||this.getMeasuredLineHeight())};a.clone=function(){var a=new b(this.text,this.font,this.color);this.cloneProps(a);return a};a.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"};a.DisplayObject_cloneProps=a.cloneProps;a.cloneProps=function(a){this.DisplayObject_cloneProps(a);a.textAlign=this.textAlign;a.textBaseline=this.textBaseline;a.maxWidth=this.maxWidth;a.outline=this.outline;a.lineHeight=this.lineHeight;a.lineWidth=this.lineWidth};a._getWorkingContext=function(){var a=b._workingContext;a.font=this.font;a.textAlign=this.textAlign||"start";a.textBaseline=this.textBaseline||"alphabetic";return a};a._drawText=function(b){var g=!!b;g||(b=this._getWorkingContext());for(var h=String(this.text).split(/(?:\r\n|\r|\n)/),i=this.lineHeight||this.getMeasuredLineHeight(),d=0,e=0,j=h.length;e<j;e++){var a=b.measureText(h[e]).width;if(this.lineWidth==null||a<this.lineWidth)g&&this._drawTextLine(b,h[e],d*i);else{for(var a=h[e].split(/(\s)/),f=a[0],c=1,k=a.length;c<k;c+=2)b.measureText(f+a[c]+a[c+1]).width>this.lineWidth?(g&&this._drawTextLine(b,f,d*i),d++,f=a[c+1]):f+=a[c]+a[c+1];g&&this._drawTextLine(b,f,d*i)}d++}return d};a._drawTextLine=function(a,b,c){this.outline?a.strokeText(b,0,c,this.maxWidth||65535):a.fillText(b,0,c,this.maxWidth||65535)};GL.Text=b})();this.GL=this.GL||{};(function(){var a=function(){throw"SpriteSheetUtils cannot be instantiated";};a._workingCanvas=GL.createCanvas?GL.createCanvas():document.createElement("canvas");a._workingContext=a._workingCanvas.getContext("2d");a.addFlippedFrames=function(b,d,f,e){if(d||f||e){var c=0;d&&a._flip(b,++c,true,false);f&&a._flip(b,++c,false,true);e&&a._flip(b,++c,true,true)}};a.extractFrame=function(f,d){isNaN(d)&&(d=f.getAnimation(d).frames[0]);var c=f.getFrame(d);if(!c)return null;var b=c.rect,e=a._workingCanvas;e.width=b.width;e.height=b.height;a._workingContext.drawImage(c.image,b.x,b.y,b.width,b.height,0,0,b.width,b.height);c=new Image;c.src=e.toDataURL("image/png");return c};a.mergeAlpha=function(d,c,a){a||(a=GL.createCanvas?GL.createCanvas():document.createElement("canvas"));a.width=Math.max(c.width,d.width);a.height=Math.max(c.height,d.height);var b=a.getContext("2d");b.save();b.drawImage(d,0,0);b.globalCompositeOperation="destination-in";b.drawImage(c,0,0);b.restore();return a};a._flip=function(i,m,k,h){for(var l=i._images,j=a._workingCanvas,c=a._workingContext,g=l.length/m,d=0;d<g;d++){var b=l[d];b.__tmp=d;j.width=0;j.width=b.width;j.height=b.height;c.setTransform(k?-1:1,0,0,h?-1:1,k?b.width:0,h?b.height:0);c.drawImage(b,0,0);var e=new Image;e.src=j.toDataURL("image/png");e.width=b.width;e.height=b.height;l.push(e)}c=i._frames;j=c.length/m;for(d=0;d<j;d++){var b=c[d],f=b.rect.clone(),e=l[b.image.__tmp+g*m],n={image:e,rect:f,regX:b.regX,regY:b.regY};if(k)f.x=e.width-f.x-f.width,n.regX=f.width-b.regX;if(h)f.y=e.height-f.y-f.height,n.regY=f.height-b.regY;c.push(n)}k="_"+(k?"h":"")+(h?"v":"");h=i._animations;i=i._data;l=h.length/m;for(d=0;d<l;d++){c=h[d];b=i[c];g={name:c+k,frequency:b.frequency,next:b.next,frames:[]};b.next&&(g.next+=k);c=b.frames;b=0;for(e=c.length;b<e;b++)g.frames.push(c[b]+j*m);i[g.name]=g;h.push(g.name)}};GL.SpriteSheetUtils=a})();this.GL=this.GL||{};(function(){var b=function(){this.initialize()},a=b.prototype;b.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions";b.ERR_RUNNING="a build is already running";a.maxWidth=2048;a.maxHeight=2048;a.spriteSheet=null;a.scale=1;a.padding=1;a._frames=null;a._animations=null;a._data=null;a._nextFrameIndex=0;a._index=0;a._callback=null;a._timeSlice=null;a._timerID=null;a._scale=1;a.initialize=function(){this._frames=[];this._animations={}};a.addFrame=function(c,a,d,e,f,g){if(this._data)throw b.ERR_RUNNING;a=a||c.bounds||c.nominalBounds;!a&&c.getBounds&&(a=c.getBounds());if(!a)return null;d=d||1;return this._frames.push({source:c,sourceRect:a,scale:d,funct:e,params:f,scope:g,index:this._frames.length,height:a.height*d})-1};a.addAnimation=function(a,c,e,d){if(this._data)throw b.ERR_RUNNING;this._animations[a]={frames:c,next:e,frequency:d}};a.addMovieClip=function(a,g,i){if(this._data)throw b.ERR_RUNNING;var f=a.frameBounds,d=g||a.bounds||a.nominalBounds;!d&&a.getBounds&&(d=a.getBounds());if(!d&&!f)return null;for(var g=a.timeline.duration,c=0;c<g;c++)this.addFrame(a,f&&f[c]?f[c]:d,i,function(a){var b=this.actionsEnabled;this.actionsEnabled=false;this.gotoAndStop(a);this.actionsEnabled=b},[c],a);var c=a.timeline._labels,a=[],e;for(e in c)a.push({index:c[e],label:e});if(a.length){a.sort(function(a,b){return a.index-b.index});c=0;for(e=a.length;c<e;c++){for(var i=a[c].label,f=c==e-1?g:a[c+1].index,d=[],h=a[c].index;h<f;h++)d.push(h);this.addAnimation(i,d,true)}}};a.build=function(){if(this._data)throw b.ERR_RUNNING;this._callback=null;for(this._startBuild();this._drawNext(););this._endBuild();return this.spriteSheet};a.buildAsync=function(a,c){if(this._data)throw b.ERR_RUNNING;this._callback=a;this._startBuild();this._timeSlice=Math.max(.01,Math.min(.99,c||.3))*50;var d=this;this._timerID=setTimeout(function(){d._run()},50-this._timeSlice)};a.stopAsync=function(){clearTimeout(this._timerID);this._data=null};a.clone=function(){throw"SpriteSheetBuilder cannot be cloned.";};a.toString=function(){return"[SpriteSheetBuilder]"};a._startBuild=function(){var h=this.padding||0;this.spriteSheet=null;this._index=0;this._scale=this.scale;var i=[];this._data={images:[],frames:i,animations:this._animations};var a=this._frames.slice();a.sort(function(a,b){return a.height<=b.height?-1:1});if(a[a.length-1].height+h*2>this.maxHeight)throw b.ERR_DIMENSIONS;for(var d=0,e=0,f=0;a.length;){var c=this._fillRow(a,d,f,i,h);if(c.w>e)e=c.w;d+=c.h;if(!c.h||!a.length){var g=GL.createCanvas?GL.createCanvas():document.createElement("canvas");g.width=this._getSize(e,this.maxWidth);g.height=this._getSize(d,this.maxHeight);this._data.images[f]=g;c.h||(e=d=0,f++)}}};a._getSize=function(b,c){for(var a=4;Math.pow(2,++a)<b;);return Math.min(c,Math.pow(2,a))};a._fillRow=function(j,g,m,o,c){var l=this.maxWidth,p=this.maxHeight-g,f=c;g+=c;for(var k=0,h=j.length-1;h>=0;h--){var d=j[h],e=this._scale*d.scale,a=d.sourceRect,n=d.source,q=Math.floor(e*a.x-c),r=Math.floor(e*a.y-c),i=Math.ceil(e*a.height+c*2),a=Math.ceil(e*a.width+c*2);if(a>l)throw b.ERR_DIMENSIONS;if(!(i>p||f+a>l))d.img=m,d.rect=new GL.Rectangle(f,g,a,i),k=k||i,j.splice(h,1),o[d.index]=[f,g,a,i,m,Math.round(-q+e*n.regX-c),Math.round(-r+e*n.regY-c)],f+=a}return{w:f,h:k}};a._endBuild=function(){this.spriteSheet=new GL.SpriteSheet(this._data);this._data=null;this._callback&&this._callback(this)};a._run=function(){for(var b=+new Date+this._timeSlice,a=false;b>+new Date;)if(!this._drawNext()){a=true;break}if(a)this._endBuild();else{var c=this;this._timerID=setTimeout(function(){c._run()},50-this._timeSlice)}};a._drawNext=function(){var a=this._frames[this._index],d=a.scale*this._scale,c=a.rect,e=a.sourceRect,b=this._data.images[a.img].getContext("2d");a.funct&&a.funct.apply(a.scope,a.params);b.save();b.beginPath();b.rect(c.x,c.y,c.width,c.height);b.clip();b.translate(Math.ceil(c.x-e.x*d),Math.ceil(c.y-e.y*d));b.scale(d,d);a.source.draw(b);b.restore();return++this._index<this._frames.length};GL.SpriteSheetBuilder=b})();this.GL=this.GL||{};(function(){var b=function(a){this.initialize(a)},a=b.prototype=new GL.DisplayObject;a.htmlElement=null;a._style=null;a.DisplayObject_initialize=a.initialize;a.initialize=function(a){typeof a=="string"&&(a=document.getElementById(a));this.DisplayObject_initialize();this.mouseEnabled=false;if(this.htmlElement=a)this._style=a.style,this._style.position="absolute",this._style.transformOrigin=this._style.WebkitTransformOrigin=this._style.msTransformOrigin=this._style.MozTransformOrigin=this._style.OTransformOrigin="0% 0%"};a.isVisible=function(){return this.htmlElement!=null};a.draw=function(){if(this.htmlElement!=null){var a=this.getConcatenatedMatrix(this._matrix),b=this.htmlElement;b.style.opacity=""+a.alpha;b.style.visibility=this.visible?"visible":"hidden";b.style.transform=b.style.WebkitTransform=b.style.OTransform=b.style.msTransform=["matrix("+a.a,a.b,a.c,a.d,a.tx+.5|0,(a.ty+.5|0)+")"].join(",");b.style.MozTransform=["matrix("+a.a,a.b,a.c,a.d,(a.tx+.5|0)+"px",(a.ty+.5|0)+"px)"].join(",");return true}};a.cache=function(){};a.uncache=function(){};a.updateCache=function(){};a.hitTest=function(){};a.localToGlobal=function(){};a.globalToLocal=function(){};a.localToLocal=function(){};a.clone=function(){var a=new b;this.cloneProps(a);return a};a.toString=function(){return"[DOMElement (name="+this.name+")]"};a._tick=function(a){if(this.htmlElement!=null&&(this.htmlElement.style.visibility="hidden",this.onTick))this.onTick(a)};GL.DOMElement=b})();this.GL=this.GL||{};(function(){var b=function(){this.initialize()},a=b.prototype;a.initialize=function(){};a.getBounds=function(){return new GL.Rectangle(0,0,0,0)};a.applyFilter=function(){};a.toString=function(){return"[Filter]"};a.clone=function(){return new b};GL.Filter=b})();this.GL=this.GL||{};(function(){var a=function(){throw"Touch cannot be instantiated";};a.isSupported=function(){return"ontouchstart"in window||window.navigator.msPointerEnabled};a.enable=function(b,c,d){if(!b||!b.canvas||!a.isSupported())return false;b.__touch={pointers:{},multitouch:!c,preventDefault:!d,count:0};"ontouchstart"in window?a._IOS_enable(b):window.navigator.msPointerEnabled&&a._IE_enable(b);return true};a.disable=function(b){b&&("ontouchstart"in window?a._IOS_disable(b):window.navigator.msPointerEnabled&&a._IE_disable(b))};a._IOS_enable=function(d){var b=d.canvas,c=d.__touch.f=function(b){a._IOS_handleEvent(d,b)};b.addEventListener("touchstart",c,false);b.addEventListener("touchmove",c,false);b.addEventListener("touchend",c,false);b.addEventListener("touchcancel",c,false)};a._IOS_disable=function(a){var b=a.canvas;if(b)a=a.__touch.f,b.removeEventListener("touchstart",a,false),b.removeEventListener("touchmove",a,false),b.removeEventListener("touchend",a,false),b.removeEventListener("touchcancel",a,false)};a._IOS_handleEvent=function(b,a){if(b){b.__touch.preventDefault&&a.preventDefault&&a.preventDefault();for(var g=a.changedTouches,d=a.type,e=0,h=g.length;e<h;e++){var c=g[e],f=c.identifier;c.target==b.canvas&&(d=="touchstart"?this._handleStart(b,f,a,c.pageX,c.pageY):d=="touchmove"?this._handleMove(b,f,a,c.pageX,c.pageY):(d=="touchend"||d=="touchcancel")&&this._handleEnd(b,f,a))}}};a._IE_enable=function(b){var d=b.canvas,c=b.__touch.f=function(c){a._IE_handleEvent(b,c)};d.addEventListener("MSPointerDown",c,false);window.addEventListener("MSPointerMove",c,false);window.addEventListener("MSPointerUp",c,false);window.addEventListener("MSPointerCancel",c,false);if(b.__touch.preventDefault)d.style.msTouchAction="none";b.__touch.activeIDs={}};a._IE_disable=function(b){var a=b.__touch.f;window.removeEventListener("MSPointerMove",a,false);window.removeEventListener("MSPointerUp",a,false);window.removeEventListener("MSPointerCancel",a,false);b.canvas&&b.canvas.removeEventListener("MSPointerDown",a,false)};a._IE_handleEvent=function(b,a){if(b){b.__touch.preventDefault&&a.preventDefault&&a.preventDefault();var d=a.type,c=a.pointerId,e=b.__touch.activeIDs;if(d=="MSPointerDown")a.srcElement==b.canvas&&(e[c]=true,this._handleStart(b,c,a,a.pageX,a.pageY));else if(e[c])if(d=="MSPointerMove")this._handleMove(b,c,a,a.pageX,a.pageY);else if(d=="MSPointerUp"||d=="MSPointerCancel")delete e[c],this._handleEnd(b,c,a)}};a._handleStart=function(c,b,e,g,f){var a=c.__touch;if(a.multitouch||!a.count){var d=a.pointers;d[b]||(d[b]=true,a.count++,c._handlePointerDown(b,e,g,f))}};a._handleMove=function(b,a,c,e,d){b.__touch.pointers[a]&&b._handlePointerMove(a,c,e,d)};a._handleEnd=function(b,a,e){var d=b.__touch,c=d.pointers;c[a]&&(d.count--,b._handlePointerUp(a,e,true),delete c[a])};GL.Touch=a})();this.GL=this.GL||{};(function(){var b=function(){this.init()};b.prototype={};var a=b.prototype;a.loaded=false;a.canceled=false;a.progress=0;a._item=null;a.onProgress=null;a.onLoadStart=null;a.onFileLoad=null;a.onFileProgress=null;a.onComplete=null;a.onError=null;a.getItem=function(){return this._item};a.init=function(){};a.load=function(){};a.cancel=function(){};a._sendLoadStart=function(){if(!this._isCanceled()&&this.onLoadStart)this.onLoadStart({target:this})};a._sendProgress=function(a){if(!this._isCanceled()){var b;if(a instanceof Number)this.progress=a,b={loaded:this.progress,total:1};else if(b=a,this.progress=a.loaded/a.total,isNaN(this.progress)||this.progress==Infinity)this.progress=0;b.target=this;if(this.onProgress)this.onProgress(b)}};a._sendFileProgress=function(a){if(this._isCanceled())this._cleanUp();else if(this.onFileProgress)a.target=this,this.onFileProgress(a)};a._sendComplete=function(){if(!this._isCanceled()&&this.onComplete)this.onComplete({target:this})};a._sendFileComplete=function(a){if(!this._isCanceled()&&this.onFileLoad)a.target=this,this.onFileLoad(a)};a._sendError=function(a){if(!this._isCanceled()&&this.onError)a==null&&(a={}),a.target=this,this.onError(a)};a._isCanceled=function(){return window.GL==null||this.canceled?true:false};a.toString=function(){return"[PreloadJS AbstractLoader]"};GL.AbstractLoader=b})();this.GL=this.GL||{};(function(){var b=function(a){this.initialize(a)},a=b.prototype=new GL.AbstractLoader;b.IMAGE="image";b.SVG="svg";b.SOUND="sound";b.JSON="json";b.JAVASCRIPT="javascript";b.CSS="css";b.XML="xml";b.TEXT="text";b.TIMEOUT_TIME=8e3;a.useXHR=true;a.stopOnError=false;a.maintainScriptOrder=true;a.next=null;a.typeHandlers=null;a.extensionHandlers=null;a._loadStartWasDispatched=false;a._maxConnections=1;a._currentLoads=null;a._loadQueue=null;a._loadedItemsById=null;a._loadedItemsBySrc=null;a._targetProgress=0;a._numItems=0;a._numItemsLoaded=null;a._scriptOrder=null;a._loadedScripts=null;a.TAG_LOAD_OGGS=true;a.initialize=function(a){this._targetProgress=this._numItemsLoaded=this._numItems=0;this._paused=false;this._currentLoads=[];this._loadQueue=[];this._scriptOrder=[];this._loadedScripts=[];this._loadedItemsById={};this._loadedItemsBySrc={};this.typeHandlers={};this.extensionHandlers={};this._loadStartWasDispatched=false;this.useXHR=a!=false&&window.XMLHttpRequest!=null;this.determineCapabilities()};a.determineCapabilities=function(){var a=GL.PreloadJS.BrowserDetect;if(a!=null)GL.PreloadJS.TAG_LOAD_OGGS=a.isFirefox||a.isOpera};b.isBinary=function(a){switch(a){case GL.PreloadJS.IMAGE:case GL.PreloadJS.SOUND:return true;default:return false}};a.installPlugin=function(a){if(!(a==null||a.getPreloadHandlers==null)){a=a.getPreloadHandlers();if(a.types!=null)for(var b=0,c=a.types.length;b<c;b++)this.typeHandlers[a.types[b]]=a.callback;if(a.extensions!=null)for(b=0,c=a.extensions.length;b<c;b++)this.extensionHandlers[a.extensions[b]]=a.callback}};a.setMaxConnections=function(a){this._maxConnections=a;this._paused||this._loadNext()};a.loadFile=function(a,b){a==null?this._sendError({text:"File is null."}):(this._addItem(a),b!==false&&this.setPaused(false))};a.loadManifest=function(a,d){var b;if(a instanceof Array){if(a.length==0){this._sendError({text:"Manifest is empty."});return}b=a}else{if(a==null){this._sendError({text:"Manifest is null."});return}b=[a]}for(var c=0,e=b.length;c<e;c++)this._addItem(b[c],false);d!==false&&this._loadNext()};a.load=function(){this.setPaused(false)};a.getResult=function(a){return this._loadedItemsById[a]||this._loadedItemsBySrc[a]};a.setPaused=function(a){(this._paused=a)||this._loadNext()};a.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0;this._loadedScripts.length=0};a._addItem=function(a){a=this._createLoadItem(a);a!=null&&(this._loadQueue.push(a),this._numItems++,this._updateProgress(),a.getItem().type==GL.PreloadJS.JAVASCRIPT&&(this._scriptOrder.push(a.getItem()),this._loadedScripts.push(null)))};a._loadNext=function(){if(!this._paused){if(!this._loadStartWasDispatched)this._sendLoadStart(),this._loadStartWasDispatched=true;if(this._numItems==this._numItemsLoaded)this.loaded=true,this._sendComplete(),this.next&&this.next.load&&this.next.load.apply(this.next);for(;this._loadQueue.length&&this._currentLoads.length<this._maxConnections;)this._loadItem(this._loadQueue.shift())}};a._loadItem=function(a){a.onProgress=GL.PreloadJS.proxy(this._handleProgress,this);a.onComplete=GL.PreloadJS.proxy(this._handleFileComplete,this);a.onError=GL.PreloadJS.proxy(this._handleFileError,this);this._currentLoads.push(a);a.load()};a._handleFileError=function(a){var a=a.target,b=this._createResultData(a.getItem());this._numItemsLoaded++;this._updateProgress();this._sendError(b);this.stopOnError||(this._removeLoadItem(a),this._loadNext())};a._createResultData=function(a){var b={id:a.id,result:null,data:a.data,type:a.type,src:a.src};this._loadedItemsById[a.id]=b;return this._loadedItemsBySrc[a.src]=b};a._handleFileComplete=function(b){var b=b.target,a=b.getItem(),c=this._createResultData(a);this._removeLoadItem(b);c.result=b instanceof GL.XHRLoader?this._createResult(a,b.getResult()):a.tag;switch(a.type){case GL.PreloadJS.IMAGE:if(b instanceof GL.XHRLoader){var d=this;c.result.onload=function(){d._handleFileTagComplete(a,c)};return}break;case GL.PreloadJS.JAVASCRIPT:if(this.maintainScriptOrder){this._loadedScripts[this._scriptOrder.indexOf(a)]=a;this._checkScriptLoadOrder(b);return}}this._handleFileTagComplete(a,c)};a._checkScriptLoadOrder=function(){for(var c=this._loadedScripts.length,b=0;b<c;b++){var a=this._loadedScripts[b];if(a===null)break;if(a!==true){var d=this.getResult(a.src),a=this.getResult(a.id);a.result=d.result;this._handleFileTagComplete(d,a);this._loadedScripts[b]=true;b--;c--}}};a._handleFileTagComplete=function(b,a){this._numItemsLoaded++;b.completeHandler&&b.completeHandler(a);this._updateProgress();this._sendFileComplete(a);this._loadNext()};a._removeLoadItem=function(c){for(var b=this._currentLoads.length,a=0;a<b;a++)if(this._currentLoads[a]==c){this._currentLoads.splice(a,1);break}};a._createResult=function(b,c){var a=null,d;switch(b.type){case GL.PreloadJS.IMAGE:a=this._createImage();break;case GL.PreloadJS.SOUND:a=b.tag||this._createAudio();break;case GL.PreloadJS.CSS:a=this._createLink();break;case GL.PreloadJS.JAVASCRIPT:a=this._createScript();break;case GL.PreloadJS.SVG:var a=this._createSVG(),e=this._createXML(c,"image/svg+xml");a.appendChild(e);break;case GL.PreloadJS.XML:d=this._createXML(c,"text/xml");break;case GL.PreloadJS.JSON:case GL.PreloadJS.TEXT:d=c}if(a){if(b.type==GL.PreloadJS.CSS)a.href=b.src;else if(b.type!=GL.PreloadJS.SVG)a.src=b.src;return a}else return d};a._createXML=function(b,c){var a;window.DOMParser?(a=new DOMParser,a=a.parseFromString(b,c)):(a=new ActiveXObject("Microsoft.XMLDOM"),a.async=false,a.loadXML(b));return a};a._handleProgress=function(a){var a=a.target,b=this._createResultData(a.getItem());b.progress=a.progress;this._sendFileProgress(b);this._updateProgress()};a._updateProgress=function(){var c=this._numItemsLoaded/this._numItems,a=this._numItems-this._numItemsLoaded;if(a>0){for(var d=0,b=0,e=this._currentLoads.length;b<e;b++)d+=this._currentLoads[b].progress;c+=d/a*(a/this._numItems)}this._sendProgress({loaded:c,total:1})};a._createLoadItem=function(b){var a={};switch(typeof b){case"string":a.src=b;break;case"object":b instanceof HTMLAudioElement?(a.tag=b,a.src=a.tag.src,a.type=GL.PreloadJS.SOUND):a=b}a.ext=this._getNameAfter(a.src,".");if(!a.type)a.type=this.getType(a.ext);if(a.id==null||a.id=="")a.id=a.src;if(b=this.typeHandlers[a.type]||this.extensionHandlers[a.ext]){b=b(a.src,a.type,a.id,a.data);if(b===false)return null;else if(b!==true){if(b.src!=null)a.src=b.src;if(b.id!=null)a.id=b.id;if(b.tag!=null&&b.tag.load instanceof Function)a.tag=b.tag}a.ext=this._getNameAfter(a.src,".")}b=this.useXHR;switch(a.type){case GL.PreloadJS.JSON:case GL.PreloadJS.XML:case GL.PreloadJS.TEXT:b=true;break;case GL.PreloadJS.SOUND:a.ext=="ogg"&&GL.PreloadJS.TAG_LOAD_OGGS&&(b=false)}return this.useXHR==true&&(a.type==GL.PreloadJS.IMAGE||a.type==GL.PreloadJS.SVG)?(a=this._createTagItem(a),a.useXHR=true,a):b?new GL.XHRLoader(a):a.tag?new GL.TagLoader(a):this._createTagItem(a)};a._createTagItem=function(b){var a,c="src",d=false;switch(b.type){case GL.PreloadJS.IMAGE:a=this._createImage();break;case GL.PreloadJS.SOUND:a=this._createAudio();break;case GL.PreloadJS.CSS:c="href";d=true;a=this._createLink();break;case GL.PreloadJS.JAVASCRIPT:d=true;a=this._createScript();break;case GL.PreloadJS.SVG:c="data",a=this._createSVG()}b.tag=a;return new GL.TagLoader(b,c,d)};a.getType=function(a){switch(a){case"jpeg":case"jpg":case"gif":case"png":return GL.PreloadJS.IMAGE;case"ogg":case"mp3":case"wav":return GL.PreloadJS.SOUND;case"json":return GL.PreloadJS.JSON;case"xml":return GL.PreloadJS.XML;case"css":return GL.PreloadJS.CSS;case"js":return GL.PreloadJS.JAVASCRIPT;case"svg":return GL.PreloadJS.SVG;default:return GL.PreloadJS.TEXT}};a._getNameAfter=function(b,d){var a=b.lastIndexOf(d),a=b.substr(a+1),c=a.lastIndexOf(/[\b|\?|\#|\s]/);return c==-1?a:a.substr(0,c)};a._createImage=function(){return document.createElement("img")};a._createSVG=function(){var a=document.createElement("object");a.type="image/svg+xml";return a};a._createAudio=function(){var a=document.createElement("audio");a.autoplay=false;a.type="audio/ogg";return a};a._createScript=function(){var a=document.createElement("script");a.type="text/javascript";return a};a._createLink=function(){var a=document.createElement("link");a.type="text/css";a.rel="stylesheet";return a};a.toString=function(){return"[PreloadJS]"};b.proxy=function(a,b){return function(){return a.apply(b,arguments)}};GL.PreloadJS=b;var c=function(){};c.init=function(){var a=navigator.userAgent;c.isFirefox=a.indexOf("Firefox")>-1;c.isOpera=window.opera!=null;c.isIOS=a.indexOf("iPod")>-1||a.indexOf("iPhone")>-1||a.indexOf("iPad")>-1};c.init();GL.PreloadJS.BrowserDetect=c})();this.GL=this.GL||{};(function(){var b=function(a,b,c){this.init(a,b,c)},a=b.prototype=new GL.AbstractLoader;a._srcAttr=null;a._loadTimeOutTimeout=null;a.tagCompleteProxy=null;a.init=function(a,b,c){this._item=a;this._srcAttr=b||"src";this.useXHR=c==true;this.isAudio=a.tag instanceof HTMLAudioElement;this.tagCompleteProxy=GL.PreloadJS.proxy(this._handleTagLoad,this)};a.cancel=function(){this.canceled=true;this._clean();var a=this.getItem();if(a!=null)a.src=null};a.load=function(){this.useXHR?this.loadXHR():this.loadTag()};a.loadXHR=function(){var a=this.getItem(),a=new GL.XHRLoader(a);a.onProgress=GL.PreloadJS.proxy(this._handleProgress,this);a.onFileLoad=GL.PreloadJS.proxy(this._handleXHRComplete,this);a.onComplete=GL.PreloadJS.proxy(this._handleXHRComplete,this);a.onError=GL.PreloadJS.proxy(this._handleLoadError,this);a.load()};a._handleXHRComplete=function(b){if(!this._isCanceled()){this._clean();b.target.onFileLoad=null;b.target.onComplete=null;var a=b.target.getItem();b.target.getResult();a.type==GL.PreloadJS.IMAGE?(a.tag.onload=GL.PreloadJS.proxy(this._sendComplete,this),a.tag.src=a.src):(a.tag[this._srcAttr]=a.src,this._sendComplete())}};a._handleLoadError=function(a){a.error&&a.error.code==101?this.loadTag():(this._clean(),this._sendError(a))};a.loadTag=function(){var b=this.getItem(),a=b.tag;clearTimeout(this._loadTimeOutTimeout);this._loadTimeOutTimeout=setTimeout(GL.PreloadJS.proxy(this._handleLoadTimeOut,this),GL.PreloadJS.TIMEOUT_TIME);if(this.isAudio)a.src=null,a.preload="auto",a.setAttribute("data-temp","true");a.onerror=GL.PreloadJS.proxy(this._handleLoadError,this);a.onprogress=GL.PreloadJS.proxy(this._handleProgress,this);this.isAudio?(a.onstalled=GL.PreloadJS.proxy(this._handleStalled,this),a.addEventListener("canplaythrough",this.tagCompleteProxy,false)):a.onload=GL.PreloadJS.proxy(this._handleTagLoad,this);a[this._srcAttr]=b.src;b.type==GL.PreloadJS.SVG&&document.getElementsByTagName("body")[0].appendChild(a);b=b.type==GL.PreloadJS.SOUND&&b.ext=="ogg"&&GL.PreloadJS.BrowserDetect.isFirefox;a.load!=null&&!b&&a.load()};a._handleLoadTimeOut=function(){this._clean();this._sendError()};a._handleStalled=function(){};a._handleLoadError=function(){this._clean();this._sendError()};a._handleTagLoad=function(){if(!this._isCanceled()){var a=this.getItem().tag;clearTimeout(this._loadTimeOutTimeout);if(!(this.loaded||this.isAudio&&a.readyState!==4))this.getItem().type==GL.PreloadJS.SVG&&document.getElementsByTagName("body")[0].removeChild(a),this.loaded=true,this._clean(),this._sendComplete()}};a._clean=function(){clearTimeout(this._loadTimeOutTimeout);var a=this.getItem().tag;a.onload=null;a.removeEventListener&&a.removeEventListener("canplaythrough",this.tagCompleteProxy,false);a.onstalled=null;a.onprogress=null;a.onerror=null};a._handleProgress=function(a){clearTimeout(this._loadTimeOutTimeout);if(this.isAudio){a=this.getItem();if(a.buffered==null)return;a={loaded:a.buffered.length>0?a.buffered.end(0):0,total:a.duration}}this._sendProgress(a)};a.toString=function(){return"[PreloadJS TagLoader]"};GL.TagLoader=b})();this.GL=this.GL||{};(function(){var b=function(a){this.init(a)},a=b.prototype=new GL.AbstractLoader;a._wasLoaded=false;a._request=null;a._loadTimeOutTimeout=null;a._xhrLevel=null;a.init=function(a){this._item=a;this._createXHR(a)};a.getResult=function(){try{return this._request.responseText}catch(a){}return this._request.response};a.cancel=function(){this.canceled=true;this._clean();this._request.abort()};a.load=function(){if(this._request==null)this.handleError();else{if(this._xhrLevel==1)this._loadTimeOutTimeout=setTimeout(GL.PreloadJS.proxy(this.handleTimeout,this),GL.PreloadJS.TIMEOUT_TIME);this._request.onloadstart=GL.PreloadJS.proxy(this.handleLoadStart,this);this._request.onprogress=GL.PreloadJS.proxy(this.handleProgress,this);this._request.onabort=GL.PreloadJS.proxy(this.handleAbort,this);this._request.onerror=GL.PreloadJS.proxy(this.handleError,this);this._request.ontimeout=GL.PreloadJS.proxy(this.handleTimeout,this);this._request.onload=GL.PreloadJS.proxy(this.handleLoad,this);this._request.onreadystatechange=GL.PreloadJS.proxy(this.handleReadyStateChange,this);try{this._request.send()}catch(a){this._sendError({source:a})}}};a.handleProgress=function(a){a.loaded>0&&a.total==0||this._sendProgress({loaded:a.loaded,total:a.total})};a.handleLoadStart=function(){clearTimeout(this._loadTimeOutTimeout);this._sendLoadStart()};a.handleAbort=function(){this._clean();this._sendError()};a.handleError=function(){this._clean();this._sendError()};a.handleReadyStateChange=function(){this._request.readyState==4&&this.handleLoad()};a._checkError=function(){switch(parseInt(this._request.status)){case 404:case 0:return false}return this._hasResponse()||this._hasTextResponse()||this._hasXMLResponse()};a._hasResponse=function(){return this._request.response!=null};a._hasTextResponse=function(){try{return this._request.responseText!=null}catch(a){return false}};a._hasXMLResponse=function(){try{return this._request.responseXML!=null}catch(a){return false}};a.handleLoad=function(){if(!this.loaded)this.loaded=true,this._checkError()?(this._clean(),this._sendComplete()):this.handleError()};a.handleTimeout=function(){this._clean();this._sendError()};a._createXHR=function(a){this._xhrLevel=1;if(window.ArrayBuffer)this._xhrLevel=2;if(window.XMLHttpRequest)this._request=new XMLHttpRequest;else try{this._request=new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(b){return null}a.type==GL.PreloadJS.TEXT&&this._request.overrideMimeType&&this._request.overrideMimeType("text/plain; charset=x-user-defined");this._request.open("GET",a.src,true);if(GL.PreloadJS.isBinary(a.type))this._request.responseType="arraybuffer";return true};a._clean=function(){clearTimeout(this._loadTimeOutTimeout);var a=this._request;a.onloadstart=null;a.onprogress=null;a.onabort=null;a.onerror=null;a.onload=null;a.ontimeout=null;a.onloadend=null;a.onreadystatechange=null;clearInterval(this._checkLoadInterval)};a.toString=function(){return"[PreloadJS XHRLoader]"};GL.XHRLoader=b})();this.GL=this.GL||{};(function(){function a(){throw"SoundJS cannot be instantiated";}function b(a,b){this.init(a,b)}function c(){}a.DELIMITER="|";a.AUDIO_TIMEOUT=8e3;a.INTERRUPT_ANY="any";a.INTERRUPT_EARLY="early";a.INTERRUPT_LATE="late";a.INTERRUPT_NONE="none";a.PLAY_INITED="playInited";a.PLAY_SUCCEEDED="playSucceeded";a.PLAY_INTERRUPTED="playInterrupted";a.PLAY_FINISHED="playFinished";a.PLAY_FAILED="playFailed";a.activePlugin=null;a.muted=false;a.pluginsRegistered=false;a.masterVolume=1;a.instances=[];a.instanceHash={};a.idHash=null;a.defaultSoundInstance=null;a.getPreloadHandlers=function(){return{callback:a.proxy(a.initLoad,a),types:["sound"],extensions:["mp3","ogg","wav"]}};a.registerPlugins=function(d){a.pluginsRegistered=true;for(var c=0,e=d.length;c<e;c++){var b=d[c];if(b!=null&&b.isSupported())return a.activePlugin=new b,true}return false};a.registerPlugin=function(b){a.pluginsRegistered=true;return b==null?false:b.isSupported()?(a.activePlugin=new b,true):false};a.isReady=function(){return a.activePlugin!=null};a.getCapabilities=function(){return a.activePlugin==null?null:a.activePlugin.capabilities};a.getCapability=function(b){return a.activePlugin==null?null:a.activePlugin.capabilities[b]};a.initLoad=function(d,f,c,e){if(!a.checkPlugin(true))return false;d=a.parsePath(d,f,c,e);if(d==null)return false;if(c!=null){if(a.idHash==null)a.idHash={};a.idHash[c]=d.src}b.create(d.src,e);c=a.activePlugin.register(d.src,e);if(c!=null){if(c.tag!=null)d.tag=c.tag;else if(c.src)d.src=c.src;if(c.completeHandler!=null)d.handler=c.completeHandler}return d};a.parsePath=function(f,c,b,d){for(var f=f.split(a.DELIMITER),c={type:c||"sound",id:b,data:d,handler:a.handleSoundReady},b=false,d=a.getCapabilities(),g=0,j=f.length;g<j;g++){var e=f[g],h=e.lastIndexOf("."),i=e.substr(h+1).toLowerCase(),h=e.substr(0,h).split("/").pop();switch(i){case"mp3":d.mp3&&(b=true);break;case"ogg":d.ogg&&(b=true);break;case"wav":d.wav&&(b=true)}if(b)return c.name=h,c.src=e,c.extension=i,c}return null};a.play=function(b,g,c,e,h,f,d){if(!a.checkPlugin(true))return a.defaultSoundInstance;b=a.getSrcFromId(b);b=a.activePlugin.create(b);try{b.mute(a.muted)}catch(i){}a.playInstance(b,g,c,e,h,f,d)||b.playFailed();return b};a.playInstance=function(b,g,c,e,h,f,d){g=g||a.INTERRUPT_NONE;c==null&&(c=0);e==null&&(e=0);h==null&&(h=0);f==null&&(f=1);d==null&&(d=0);if(c==0){if(!a.beginPlaying(b,g,e,h,f,d))return false}else setTimeout(function(){a.beginPlaying(b,g,e,h,f,d)},c);this.instances.push(b);this.instanceHash[b.uniqueId]=b;return true};a.beginPlaying=function(a,c,d,f,e,g){return!b.add(a,c)?false:!a.beginPlaying(d,f,e,g)?(this.instances.splice(this.instances.indexOf(a),1),delete this.instanceHash[a.uniqueId],false):true};a.checkPlugin=function(b){return a.activePlugin==null&&(b&&!a.pluginsRegistered&&a.registerPlugin(GL.HTMLAudioPlugin),a.activePlugin==null)?false:true};a.getSrcFromId=function(b){return a.idHash==null||a.idHash[b]==null?b:a.idHash[b]};a.setVolume=function(b,c){if(Number(b)==null)return false;b=Math.max(0,Math.min(1,b));return a.tellAllInstances("setVolume",c,b)};a.getMasterVolume=function(){return a.masterVolume};a.setMasterVolume=function(b){a.masterVolume=b;return a.tellAllInstances("setMasterVolume",null,b)};a.setMute=function(b){this.muted=b;return a.tellAllInstances("mute",null,b)};a.pause=function(b){return a.tellAllInstances("pause",b)};a.resume=function(b){return a.tellAllInstances("resume",b)};a.stop=function(b){return a.tellAllInstances("stop",b)};a.getInstanceById=function(a){return this.instanceHash[a]};a.playFinished=function(a){b.remove(a);this.instances.splice(this.instances.indexOf(a),1)};a.tellAllInstances=function(e,c,b){if(this.activePlugin==null)return false;for(var c=this.getSrcFromId(c),d=this.instances.length-1;d>=0;d--){var a=this.instances[d];if(!(c!=null&&a.src!=c))switch(e){case"pause":a.pause();break;case"resume":a.resume();break;case"setVolume":a.setVolume(b);break;case"setMasterVolume":a.setMasterVolume(b);break;case"mute":a.mute(b);break;case"stop":a.stop();break;case"setPan":a.setPan(b)}}return true};a.proxy=function(a,b){return function(){return a.apply(b,arguments)}};GL.SoundJS=a;b.channels={};b.create=function(a,c){var d=b.get(a);d==null?b.channels[a]=new b(a,c):d.max+=c};b.add=function(a,d){var c=b.get(a.src);return c==null?false:c.add(a,d)};b.remove=function(a){var c=b.get(a.src);if(c==null)return false;c.remove(a);return true};b.get=function(a){return b.channels[a]};b.prototype={src:null,max:null,length:0,init:function(a,b){this.src=a;this.max=b||1;this.instances=[]},"get":function(a){return this.instances[a]},add:function(a,b){if(!this.getSlot(b,a))return false;this.instances.push(a);this.length++;return true},remove:function(a){a=this.instances.indexOf(a);if(a==-1)return false;this.instances.splice(a,1);this.length--;return true},getSlot:function(e){for(var b,c,d=0,f=this.max||100;d<f;d++){b=this.get(d);if(b==null)return true;else if(e==a.INTERRUPT_NONE)continue;if(d==0)c=b;else if(b.playState==a.PLAY_FINISHED||b==a.PLAY_INTERRUPTED||b==a.PLAY_FAILED)c=b;else if(e==a.INTERRUPT_EARLY&&b.getPosition()<c.getPosition()||e==a.INTERRUPT_LATE&&b.getPosition()>c.getPosition())c=b}return c!=null?(c.interrupt(),this.remove(c),true):false},toString:function(){return"[SoundJS SoundChannel]"}};a.defaultSoundInstance=new function(){this.isDefault=true;this.pause=this.resume=this.play=this.beginPlaying=this.cleanUp=this.interrupt=this.stop=this.setMasterVolume=this.setVolume=this.mute=this.setPan=this.getPosition=this.setPosition=this.playFailed=function(){return false};this.getVolume=this.getPan=this.getDuration=function(){return 0};this.playState=a.PLAY_FAILED;this.toString=function(){return"[SoundJS Default Sound Instance]"}};c.init=function(){var a=navigator.userAgent;c.isFirefox=a.indexOf("Firefox")>-1;c.isOpera=window.opera!=null;c.isIOS=a.indexOf("iPod")>-1||a.indexOf("iPhone")>-1||a.indexOf("iPad")>-1};c.init();GL.SoundJS.BrowserDetect=c})();this.GL=this.GL||{};(function(){function a(){this.init()}function c(a){this.init(a)}function b(a){this.init(a)}a.MAX_INSTANCES=30;a.capabilities=null;a.lastId=0;a.AUDIO_READY="canplaythrough";a.AUDIO_ENDED="ended";a.AUDIO_ERROR="error";a.AUDIO_STALLED="stalled";a.fillChannels=false;a.isSupported=function(){if(GL.SoundJS.BrowserDetect.isIOS)return false;a.generateCapabilities();return a.tag==null?false:true};a.generateCapabilities=function(){if(a.capabilities==null){var b=a.tag=document.createElement("audio");if(b.canPlayType==null)return null;a.capabilities={panning:false,volume:true,mp3:b.canPlayType("audio/mp3")!="no"&&b.canPlayType("audio/mp3")!="",ogg:b.canPlayType("audio/ogg")!="no"&&b.canPlayType("audio/ogg")!="",mpeg:b.canPlayType("audio/mpeg")!="no"&&b.canPlayType("audio/mpeg")!="",wav:b.canPlayType("audio/wav")!="no"&&b.canPlayType("audio/wav")!="",channels:a.MAX_INSTANCES}}};a.prototype={capabilities:null,FT:.001,channels:null,init:function(){this.capabilities=a.capabilities;this.channels={}},register:function(c,e){for(var f=b.get(c),a,d=0,g=e||1;d<g;d++)a=this.createTag(c),f.add(a);return{tag:a}},createTag:function(b){var a=document.createElement("audio");a.preload=false;a.src=b;return a},create:function(a){a=new c(a);a.owner=this;return a},toString:function(){return"[HTMLAudioPlugin]"}};GL.HTMLAudioPlugin=a;c.prototype={src:null,uniqueId:-1,playState:null,owner:null,loaded:false,lastInterrupt:GL.SoundJS.INTERRUPT_NONE,offset:0,delay:0,volume:1,pan:0,remainingLoops:0,delayTimeout:-1,tag:null,muted:false,paused:false,onComplete:null,onLoop:null,onReady:null,onPlayFailed:null,onPlayInterrupted:null,endedHandler:null,readyHandler:null,stalledHandler:null,init:function(a){this.uniqueId=GL.HTMLAudioPlugin.lastId++;this.src=a;this.endedHandler=GL.SoundJS.proxy(this.handleSoundComplete,this);this.readyHandler=GL.SoundJS.proxy(this.handleSoundReady,this);this.stalledHandler=GL.SoundJS.proxy(this.handleSoundStalled,this)},cleanUp:function(){var a=this.tag;if(a!=null){a.pause();try{a.currentTime=0}catch(c){}a.removeEventListener(GL.HTMLAudioPlugin.AUDIO_ENDED,this.endedHandler,false);a.removeEventListener(GL.HTMLAudioPlugin.AUDIO_READY,this.readyHandler,false);b.setInstance(this.src,a);this.tag=null}window.GL!=null&&GL.SoundJS.playFinished(this)},interrupt:function(){if(this.tag!=null){this.playState=GL.SoundJS.PLAY_INTERRUPTED;if(this.onPlayInterrupted)this.onPlayInterrupted(this);this.cleanUp();this.paused=false}},play:function(a,b,c,e,d,f){this.cleanUp();GL.SoundJS.playInstance(this,a,b,c,e,d,f)},beginPlaying:function(c,d,e){if(window.GL!=null){var a=this.tag=b.getInstance(this.src);if(a==null)return this.playFailed(),-1;a.addEventListener(GL.HTMLAudioPlugin.AUDIO_ENDED,this.endedHandler,false);this.offset=c;this.volume=e;this.updateVolume();this.remainingLoops=d;a.readyState!==4?(a.addEventListener(GL.HTMLAudioPlugin.AUDIO_READY,this.readyHandler,false),a.addEventListener(GL.HTMLAudioPlugin.AUDIO_STALLED,this.stalledHandler,false),a.load()):this.handleSoundReady(null);return 1}},handleSoundStalled:function(){if(this.onPlayFailed!=null)this.onPlayFailed(this);this.cleanUp()},handleSoundReady:function(){if(window.GL!=null)if(this.playState=GL.SoundJS.PLAY_SUCCEEDED,this.paused=false,this.tag.removeEventListener(GL.HTMLAudioPlugin.AUDIO_READY,this.readyHandler,false),this.offset>=this.getDuration())this.playFailed();else{if(this.offset>0)this.tag.currentTime=this.offset*.001;if(this.remainingLoops==-1)this.tag.loop=true;this.tag.play()}},pause:function(){this.paused=true;return this.tag!=null?(this.tag.pause(),false):true},resume:function(){this.paused=false;return this.tag!=null?(this.tag.play(),false):true},stop:function(){this.pause();this.playState=GL.SoundJS.PLAY_FINISHED;this.cleanUp();return true},setMasterVolume:function(){this.updateVolume();return true},setVolume:function(a){this.volume=a;this.updateVolume();return true},updateVolume:function(){return this.tag!=null?(this.tag.volume=this.muted?0:this.volume*GL.SoundJS.masterVolume,true):false},getVolume:function(){return this.volume},mute:function(a){this.muted=a;this.updateVolume();return true},setPan:function(){return false},getPan:function(){return 0},getPosition:function(){return this.tag==null?0:this.tag.currentTime*1e3},setPosition:function(a){if(this.tag==null)return false;try{this.tag.currentTime=a*.001}catch(b){return false}return true},getDuration:function(){return this.tag==null?0:this.tag.duration*1e3},handleSoundComplete:function(){if(this.remainingLoops!=0){if(this.remainingLoops--,this.tag.play(),this.onLoop!=null)this.onLoop(this)}else if(window.GL!=null){this.playState=GL.SoundJS.PLAY_FINISHED;if(this.onComplete!=null)this.onComplete(this);this.cleanUp()}},playFailed:function(){if(window.GL!=null){this.playState=GL.SoundJS.PLAY_FAILED;if(this.onPlayFailed!=null)this.onPlayFailed(this);this.cleanUp()}},toString:function(){return"[HTMLAudioPlugin SoundInstance]"}};b.channels={};b.get=function(a){var c=b.channels[a];c==null&&(c=b.channels[a]=new b(a));return c};b.getInstance=function(a){a=b.channels[a];return a==null?null:a.get()};b.setInstance=function(c,d){var a=b.channels[c];return a==null?null:a.set(d)};b.prototype={src:null,length:0,available:0,tags:null,init:function(a){this.src=a;this.tags=[]},add:function(a){this.tags.push(a);this.length++;this.available=this.tags.length},"get":function(){if(this.tags.length==0)return null;this.available=this.tags.length;var a=this.tags.pop();document.body.appendChild(a);return a},"set":function(a){this.tags.indexOf(a)==-1&&this.tags.push(a);document.body.removeChild(a);this.available=this.tags.length},toString:function(){return"[HTMLAudioPlugin TagChannel]"}}})();this.GL=this.GL||{};(function(){var b=function(b,a){this.initialize(b,a)},a=b.prototype;b.NONE=0;b.LOOP=1;b.REVERSE=2;b.IGNORE={};b._tweens=[];b._plugins={};b.get=function(d,a,c){return new b(d,a,c)};b.tick=function(f,e){for(var d=b._tweens.slice(),c=d.length-1;c>=0;c--){var a=d[c];e&&!a.ignoreGlobalPause||a._paused||a.tick(a._useTicks?1:f)}};GL.Ticker&&GL.Ticker.addListener(b,false);b.removeTweens=function(d){if(d.tweenjs_count){for(var c=b._tweens,a=c.length-1;a>=0;a--)if(c[a]._target==d)c[a]._paused=true,c.splice(a,1);d.tweenjs_count=0}};b.hasActiveTweens=function(a){return a?a.tweenjs_count:b._tweens&&b._tweens.length};b.installPlugin=function(c,h){var f=c.priority;if(f==null)c.priority=f=0;for(var g=0,j=h.length,a=b._plugins;g<j;g++){var d=h[g];if(a[d]){for(var i=a[d],e=0,k=i.length;e<k;e++)if(f<i[e].priority)break;a[d].splice(e,0,c)}else a[d]=[c]}};b._register=function(c,d){var a=c._target;if(d){if(a)a.tweenjs_count=a.tweenjs_count?a.tweenjs_count+1:1;b._tweens.push(c)}else a&&a.tweenjs_count--,a=b._tweens.indexOf(c),a!=-1&&b._tweens.splice(a,1)};a.ignoreGlobalPause=false;a.loop=false;a.duration=0;a.pluginData=null;a.onChange=null;a.target=null;a.position=null;a._paused=false;a._curQueueProps=null;a._initQueueProps=null;a._steps=null;a._actions=null;a._prevPosition=0;a._stepPosition=0;a._prevPos=-1;a._target=null;a._useTicks=false;a.initialize=function(c,a,d){this.target=this._target=c;if(a)this._useTicks=a.useTicks,this.ignoreGlobalPause=a.ignoreGlobalPause,this.loop=a.loop,this.onChange=a.onChange,a.override&&b.removeTweens(c);this.pluginData=d||{};this._curQueueProps={};this._initQueueProps={};this._steps=[];this._actions=[];a&&a.paused?this._paused=true:b._register(this,true);a&&a.position!=null&&this.setPosition(a.position,b.NONE)};a.wait=function(a){if(a==null||a<=0)return this;var b=this._cloneProps(this._curQueueProps);return this._addStep({d:a,p0:b,e:this._linearEase,p1:b})};a.to=function(b,a,c){if(isNaN(a)||a<0)a=0;return this._addStep({d:a||0,p0:this._cloneProps(this._curQueueProps),e:c,p1:this._cloneProps(this._appendQueueProps(b))})};a.call=function(c,a,b){return this._addAction({f:c,p:a?a:[this],o:b?b:this._target})};a.set=function(b,a){return this._addAction({f:this._set,o:this,p:[b,a?a:this._target]})};a.play=function(a){return this.call(a.setPaused,[false],a)};a.pause=function(a){a||(a=this);return this.call(a.setPaused,[true],a)};a.setPosition=function(d,e){d<0&&(d=0);e==null&&(e=1);var a=d,c=false;if(a>=this.duration)this.loop?a%=this.duration:(a=this.duration,c=true);if(a==this._prevPos)return c;if(this._target)if(c)this._updateTargetProps(null,1);else if(this._steps.length>0){for(var b=0,f=this._steps.length;b<f;b++)if(this._steps[b].t>a)break;b=this._steps[b-1];this._updateTargetProps(b,(this._stepPosition=a-b.t)/b.d,a)}b=this._prevPos;this.position=this._prevPos=a;this._prevPosition=d;e!=0&&this._actions.length>0&&(this._useTicks?this._runActions(a,a):e==1&&a<b?(b!=this.duration&&this._runActions(b,this.duration),this._runActions(0,a,true)):this._runActions(b,a));c&&this.setPaused(true);this.onChange&&this.onChange(this);return c};a.tick=function(a){this._paused||this.setPosition(this._prevPosition+a)};a.setPaused=function(a){this._paused=!!a;b._register(this,!a);return this};a.w=a.wait;a.t=a.to;a.c=a.call;a.s=a.set;a.toString=function(){return"[Tween]"};a.clone=function(){throw"Tween can not be cloned.";};a._updateTargetProps=function(e,c,k){var g,f,a,d;!e&&c==1?g=f=this._curQueueProps:(e.e&&(c=e.e(c,0,1,1)),g=e.p0,f=e.p1);for(n in this._initQueueProps){if((a=g[n])==null)g[n]=a=this._initQueueProps[n];if((d=f[n])==null)f[n]=d=a;a=a==d||c==0||c==1||typeof a!="number"?c==1?d:a:a+(d-a)*c;var i=false;if(d=b._plugins[n])for(var h=0,l=d.length;h<l;h++){var j=d[h].tween(this,n,a,g,f,c,k,!e);j==b.IGNORE?i=true:a=j}i||(this._target[n]=a)}};a._runActions=function(b,a,i){var g=b,d=a,e=-1,f=this._actions.length,h=1;b>a&&(g=a,d=b,e=f,f=h=-1);for(;(e+=h)!=f;){var a=this._actions[e],c=a.t;(c==d||c>g&&c<d||i&&c==b)&&a.f.apply(a.o,a.p)}};a._appendQueueProps=function(g){var f,c,d,a;for(a in g){if(this._initQueueProps[a]==null){c=this._target[a];if(f=b._plugins[a])for(var e=0,h=f.length;e<h;e++)d=f[e].init(this,a,c),d!=b.IGNORE&&(c=d);this._initQueueProps[a]=c}this._curQueueProps[a]=g[a]}return this._curQueueProps};a._cloneProps=function(b){var c={},a;for(a in b)c[a]=b[a];return c};a._addStep=function(a){if(a.d>0)this._steps.push(a),a.t=this.duration,this.duration+=a.d;return this};a._addAction=function(a){a.t=this.duration;this._actions.push(a);return this};a._set=function(a,c){for(var b in a)c[b]=a[b]};GL.Tween=b})();this.GL=this.GL||{};(function(){var b=function(a,b,c){this.initialize(a,b,c)},a=b.prototype;a.ignoreGlobalPause=false;a.duration=0;a.loop=false;a.onChange=null;a.position=null;a._paused=false;a._tweens=null;a._labels=null;a._prevPosition=0;a._prevPos=-1;a._useTicks=false;a.initialize=function(b,c,a){this._tweens=[];if(a)this._useTicks=a.useTicks,this.loop=a.loop,this.ignoreGlobalPause=a.ignoreGlobalPause,this.onChange=a.onChange;b&&this.addTween.apply(this,b);this.setLabels(c);a&&a.paused?this._paused=true:GL.Tween._register(this,true);a&&a.position!=null&&this.setPosition(a.position,GL.Tween.NONE)};a.addTween=function(a){var b=arguments.length;if(b>1){for(var c=0;c<b;c++)this.addTween(arguments[c]);return arguments[0]}else if(b==0)return null;this.removeTween(a);this._tweens.push(a);a.setPaused(true);a._paused=false;a._useTicks=this._useTicks;if(a.duration>this.duration)this.duration=a.duration;this._prevPos>=0&&a.setPosition(this._prevPos,GL.Tween.NONE);return a};a.removeTween=function(d){var a=arguments.length;if(a>1){for(var b=true,c=0;c<a;c++)b=b&&this.removeTween(arguments[c]);return b}else if(a==0)return false;a=this._tweens.indexOf(d);return a!=-1?(this._tweens.splice(a,1),d.duration>=this.duration&&this.updateDuration(),true):false};a.addLabel=function(a,b){this._labels[a]=b};a.setLabels=function(a){this._labels=a?a:{}};a.gotoAndPlay=function(a){this.setPaused(false);this._goto(a)};a.gotoAndStop=function(a){this.setPaused(true);this._goto(a)};a.setPosition=function(a,e){a<0&&(a=0);var b=this.loop?a%this.duration:a,d=!this.loop&&a>=this.duration;if(b==this._prevPos)return d;this._prevPosition=a;this.position=this._prevPos=b;for(var c=0,f=this._tweens.length;c<f;c++)if(this._tweens[c].setPosition(b,e),b!=this._prevPos)return false;d&&this.setPaused(true);this.onChange&&this.onChange(this);return d};a.setPaused=function(a){this._paused=!!a;GL.Tween._register(this,!a)};a.updateDuration=function(){for(var a=this.duration=0,b=this._tweens.length;a<b;a++)if(tween=this._tweens[a],tween.duration>this.duration)this.duration=tween.duration};a.tick=function(a){this.setPosition(this._prevPosition+a)};a.resolve=function(b){var a=parseFloat(b);isNaN(a)&&(a=this._labels[b]);return a};a.toString=function(){return"[Timeline]"};a.clone=function(){throw"Timeline can not be cloned.";};a._goto=function(a){a=this.resolve(a);a!=null&&this.setPosition(a)};GL.Timeline=b})();this.GL=this.GL||{};(function(){var a=function(){throw"Ease cannot be instantiated.";};a.linear=function(a){return a};a.none=a.linear;a.get=function(a){a<-1&&(a=-1);a>1&&(a=1);return function(b){return a==0?b:a<0?b*(b*-a+1+a):b*((2-b)*a+(1-a))}};a.getPowIn=function(a){return function(b){return Math.pow(b,a)}};a.getPowOut=function(a){return function(b){return 1-Math.pow(1-b,a)}};a.getPowInOut=function(a){return function(b){return(b*=2)<1?.5*Math.pow(b,a):1-.5*Math.abs(Math.pow(2-b,a))}};a.quadIn=a.getPowIn(2);a.quadOut=a.getPowOut(2);a.quadInOut=a.getPowInOut(2);a.cubicIn=a.getPowIn(3);a.cubicOut=a.getPowOut(3);a.cubicInOut=a.getPowInOut(3);a.quartIn=a.getPowIn(4);a.quartOut=a.getPowOut(4);a.quartInOut=a.getPowInOut(4);a.quintIn=a.getPowIn(5);a.quintOut=a.getPowOut(5);a.quintInOut=a.getPowInOut(5);a.sineIn=function(a){return 1-Math.cos(a*Math.PI/2)};a.sineOut=function(a){return Math.sin(a*Math.PI/2)};a.sineInOut=function(a){return-.5*(Math.cos(Math.PI*a)-1)};a.getBackIn=function(a){return function(b){return b*b*((a+1)*b-a)}};a.backIn=a.getBackIn(1.7);a.getBackOut=function(a){return function(b){return--b*b*((a+1)*b+a)+1}};a.backOut=a.getBackOut(1.7);a.getBackInOut=function(a){a*=1.525;return function(b){return(b*=2)<1?.5*b*b*((a+1)*b-a):.5*((b-=2)*b*((a+1)*b+a)+2)}};a.backInOut=a.getBackInOut(1.7);a.circIn=function(a){return-(Math.sqrt(1-a*a)-1)};a.circOut=function(a){return Math.sqrt(1- --a*a)};a.circInOut=function(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)};a.bounceIn=function(b){return 1-a.bounceOut(1-b)};a.bounceOut=function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375};a.bounceInOut=function(b){return b<.5?a.bounceIn(b*2)*.5:a.bounceOut(b*2-1)*.5+.5};a.getElasticIn=function(a,b){var c=Math.PI*2;return function(d){if(d==0||d==1)return d;var e=b/c*Math.asin(1/a);return-(a*Math.pow(2,10*(d-=1))*Math.sin((d-e)*c/b))}};a.elasticIn=a.getElasticIn(1,.3);a.getElasticOut=function(a,b){var c=Math.PI*2;return function(d){if(d==0||d==1)return d;var e=b/c*Math.asin(1/a);return a*Math.pow(2,-10*d)*Math.sin((d-e)*c/b)+1}};a.elasticOut=a.getElasticOut(1,.3);a.getElasticInOut=function(a,b){var c=Math.PI*2;return function(d){var e=b/c*Math.asin(1/a);return(d*=2)<1?-.5*a*Math.pow(2,10*(d-=1))*Math.sin((d-e)*c/b):a*Math.pow(2,-10*(d-=1))*Math.sin((d-e)*c/b)*.5+1}};a.elasticInOut=a.getElasticInOut(1,.3*1.5);GL.Ease=a})()
